
!function(e,n){"use strict";if(!("Ink"in e)){var t={},r="INK_STATICMODE"in e?e.INK_STATICMODE:!1,i={},o=[],a={},l=[],u=function(e){if("object"!=typeof e)return!1;for(var n in e)if(e.hasOwnProperty(n))return!1;return!0};e.Ink={_checkPendingRequireModules:function(){var e,n,t,r,o,a,u=[];for(e=0,n=l.length;n>e;++e)if(t=l[e]){for(r in t.left)t.left.hasOwnProperty(r)&&(o=i[r],o&&(t.args[t.left[r]]=o,delete t.left[r],--t.remaining));if(t.remaining>0)u.push(t);else{if(a=t.cb,!a)continue;delete t.cb,a.apply(!1,t.args)}}l=u,l.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},setStaticMode:function(e){r=e},getPath:function(e,n){var r,i,o,a,l=e.split(/[._]/g);for(i=l.length;i>=0;i-=1)if(r=l.slice(0,i+1).join("."),t[r]){o=r;break}return a=t[o||"Ink"],"/"!==a[a.length-1]&&(a+="/"),i<l.length&&(a+=l.slice(i+1).join("/")+"/"),n||(a+="lib.js"),a},setPath:function(e,n){t[e.replace(/_/,".")]=n},loadScript:function(e){if(r)throw new Error("Requiring a module to be loaded dynamically while in static mode");-1===e.indexOf("/")&&(e=this.getPath(e));var t=n.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e);var i=n.getElementsByTagName("head");i.length>0&&i[0].appendChild(t)},namespace:function(n,t){if(!n||!n.length)return null;for(var r,i=n.split("."),o=e,a=0,l=i.length;l>a;++a)o[i[a]]=o[i[a]]||{},r=o,o=o[i[a]];return t?[r,i[a-1]]:o},getModule:function(e,n){var t=n?[e,"_",n].join(""):e;return i[t]},createModule:function(n,t,r,l){if("string"!=typeof n)throw new Error("module name must be a string!");if(!("number"==typeof t||"string"==typeof t&&t.length>0))throw new Error("version number missing!");var c=function(){var r=[n,"_",t].join("");if(!i[r]){delete a[r],delete a[n];var c=Array.prototype.slice.call(arguments),s=l.apply(e,c);o.push(r),"object"==typeof s?s._version=t:"function"==typeof s&&(s.prototype._version=t,s._version=t);var f,p=0===n.indexOf("Ink.");p&&(f=Ink.namespace(n,!0)),i[r]=s,p&&(f[0][f[1]+"_"+t]=s),i[n]=s,p&&u(f[0][f[1]])&&(f[0][f[1]]=s),this&&Ink._checkPendingRequireModules()}};this.requireModules(r,c)},requireModules:function(e,n){var t,r,o,u,c;if(r=e.length,o={args:new Array(r),left:{},remaining:r,cb:n},"object"!=typeof e||void 0===e.length)throw new Error("Dependency list should be an array!");if("function"!=typeof n)throw new Error("Callback should be a function!");for(t=0;r>t;++t)u=e[t],c=i[u],c?(o.args[t]=c,--o.remaining):(a[u]||(a[u]=!0,Ink.loadScript(u)),o.left[u]=t);o.remaining>0?l.push(o):n.apply(!0,o.args)},getModulesLoadOrder:function(){return o.slice()},getModuleScripts:function(){var e=this.getModulesLoadOrder();return e.unshift("Ink_1"),e=e.map(function(e){return["<scr",'ipt type="text/javascript" src="',Ink.getModuleURL(e),'"></scr',"ipt>"].join("")}),e.join("\n")},createExt:function(e,n,t,r){return Ink.createModule("Ink.Ext."+e,n,t,r)},bind:function(e,n){var t=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments),i=t.concat(r);return e.apply(n,i)}},bindMethod:function(e,n){return this.bind.apply(this,[e[n],e].concat([].slice.call(arguments,2)))},bindEvent:function(n,t){var r=Array.prototype.slice.call(arguments,2);return function(i){var o=r.slice();return o.unshift(i||e.event),n.apply(t,o)}},i:function(e){if(!e)throw new Error("Ink.i => id or element must be passed");return"string"==typeof e?n.getElementById(e):e},s:function(e,t){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(e,t||n)[0]||null},ss:function(e,t){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(e,t||n)},extendObj:function(e,n){if(arguments.length>2&&(n=Ink.extendObj.apply(this,[].slice.call(arguments,1))),n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}},Ink.setPath("Ink","INK_PATH"in e?e.INK_PATH:e.location.protocol+"//js.ink.sapo.pt/Ink/")}}(window,document);
Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(t,e){this.init(t,e)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(t,e){if(!t)throw new Error("WRONG_ARGUMENTS_ERR");var n=Ink.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null,onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},Ajax.globalOptions);if(e&&"object"==typeof e){if(n=Ink.extendObj(n,e),"object"==typeof e.parameters)n.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),e.parameters);else if(null!==e.parameters){var s=this.paramsObjToStr(Ajax.globalOptions.parameters);s&&(n.parameters=e.parameters+"&"+s)}n.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),n.requestHeaders=Ink.extendObj(n.requestHeaders,e.requestHeaders)}this.options=n,this.safeCall("onInit"),this.url=t;var r=this._locationFromURL(t);this.isHTTP=this._locationIsHTTP(r),this.isCrossDomain=this._locationIsCrossDomain(r,location),this.requestHasBody=n.method.search(/^get|head$/i)<0,this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},_locationFromURL:function(t){var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");return e.href=t,e},_locationIsHTTP:function(t){return t.protocol.match(/^https?:/i)?!0:!1},_locationIsCrossDomain:function(t,e){return e=e||window.location,Ajax.prototype._locationIsHTTP(t)&&"widget:"!==e.protocol&&"object"!=typeof window.widget?e.protocol!==t.protocol||e.host!==t.host:!1},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var t={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"2"};if(this.options.cors&&(this.options.signRequest||delete t["X-Requested-With"],delete t["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&(t[e]=this.options.requestHeaders[e]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(t.Connection="close");for(var n in t)t.hasOwnProperty(n)&&this.transport.setRequestHeader(n,t[n])}catch(s){}},paramsObjToStr:function(t){var e,n,s,r,i=[];if("object"!=typeof t)return t;for(s in t)if(t.hasOwnProperty(s))if(r=t[s],"[object Array]"!==Object.prototype.toString.call(r)||isNaN(r.length))i=i.concat([encodeURIComponent(s),"=",encodeURIComponent(r),"&"]);else for(e=0,n=r.length;n>e;e++)i=i.concat([encodeURIComponent(s),"[]","=",encodeURIComponent(r[e]),"&"]);return i.length>0&&i.pop(),i.join("")},setParams:function(){var t=null,e=this.options.parameters;t="object"==typeof e?this.paramsObjToStr(e):""+e,t&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+t:this.url.split("#")[0]+"?"+t)},getHeader:function(t){if(this.usingXDomainReq&&"Content-Type"===t)return this.transport.contentType;try{return this.transport.getResponseHeader(t)}catch(e){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(t){return null}},getResponse:function(){var t=this.transport,e={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:t,timeTaken:new Date-this.startTime,requestedUrl:this.url};e.readyState=t.readyState;try{e.responseText=t.responseText}catch(n){}try{e.responseXML=t.responseXML}catch(n){}try{e.status=t.status}catch(n){e.status=0}try{e.statusText=t.statusText}catch(n){e.statusText=""}return e},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(t){}this.finish()}},runStateChange:function(){var t=this.transport.readyState;if(3===t)this.isHTTP&&this.safeCall("onHeaders");else if(4===t||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()),void 0;var e,n=this.transport.responseText,s=this.getResponse(),r=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===r?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):r=n?200:404:304===r&&(r=200);var i=this.usingXDomainReq||r>=200&&300>r,o=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(o.indexOf("application/json")>=0||"force"===this.options.evalJS))try{e=this.evalJSON(n,this.sanitizeJSON),e&&(n=s.responseJSON=e)}catch(a){i&&this.safeCall("onException",a)}if(this.usingXDomainReq&&-1!==o.indexOf("xml")&&"DOMParser"in window){var u;switch(o){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":u=o;break;default:u="text/xml"}var l=(new DOMParser).parseFromString(this.transport.responseText,u);this.transport.responseXML=l,s.responseXML=l}null!==this.transport.responseXML&&null===s.responseJSON&&""!==this.transport.responseXML.xml&&(n=this.transport.responseXML),(r||this.usingXDomainReq)&&(i?this.safeCall("onSuccess",s,n):this.safeCall("onFailure",s,n),this.safeCall("on"+r,s,n)),this.finish(s,n)}},finish:function(t,e){if(t&&this.safeCall("onComplete",t,e),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(n){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(t,e){function n(t){setTimeout(function(){throw t.message&&(t.message+="\n"+(t.stacktrace||t.stack||"")),t},1)}if("function"==typeof this.options[t])try{this.options[t].apply(this,[].slice.call(arguments,1))}catch(s){n(s)}else e&&window.Error&&e instanceof Error&&n(e)},setRequestHeader:function(t,e){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[t]=e},request:function(){if(this.transport){var t=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(t=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(t=this.options.parameters),"object"!=typeof t||t.nodeType?"object"!=typeof t&&null!==t&&(t=""+t):t=this.paramsObjToStr(t),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var e=this.url,n=this.options.method,s=this.isCrossDomain;s&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",e),e=this.options.xhrProxy+encodeURIComponent(e),s=!1);try{this.transport.open(n,e,this.options.asynchronous)}catch(r){return this.safeCall("onException",r),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(s)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime(),this.transport.send(t)}catch(r){return this.safeCall("onException",r),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},makeError:function(t,e){if("function"!=typeof Error)return{code:t,message:e};var n=new Error(e);return n.code=t,n},isJSON:function(t){return"string"==typeof t&&t?(t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}return null}},Ajax.load=function(t,e){return new Ajax(t,{method:"GET",onSuccess:function(t){e(t.responseText,t)}})},Ajax.ping=function(t,e){return new Ajax(t,{method:"HEAD",onSuccess:function(t){"function"==typeof e&&e(t)}})},Ajax});
Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};return t.prototype={init:function(t,e){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},e||{}),this.randVar=this.options.randVar!==!1?this.options.randVar:parseInt(1e5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=t,"function"==typeof this.options.onComplete&&(this.options.onSuccess=this.options.onComplete),"string"!=typeof this.uri)throw"Please define an URI";if("function"!=typeof this.options.onSuccess)throw"please define a callback function on option onSuccess!";Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){window.clearTimeout(this.timeout),delete window.Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag(),this.options.onSuccess(arguments[0])},this),this._addScriptTag()},_addParamsToGet:function(t,e){var n,s,i,o=-1!==t.indexOf("?"),r=[t];for(s in e)e.hasOwnProperty(s)&&(o?n="&":(n="?",o=!0),i=e[s],"number"==typeof i||i||(i=""),r=r.concat([n,s,"=",encodeURIComponent(i)]));return r.join("")},_getScriptContainer:function(){var t=document.getElementsByTagName("head");if(0===t.length){var e=document.getElementsByTagName("script");return e[0]}return t[0]},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params);var t=document.createElement("script");t.type="text/javascript",t.src=this.uri;var e=this._getScriptContainer();e.appendChild(t),this.timeout=setTimeout(Ink.bind(this._requestFailed,this),1e3*this.options.timeout)},_requestFailed:function(){delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},_removeScriptTag:function(){for(var t,e,n=document.getElementsByTagName("script"),s=0,i=n.length;i>s;++s)if(t=n[s],e=t.getAttribute("src")||t.src,null!==e&&e===this.uri)return t.parentNode.removeChild(t),void 0}},t});
Ink.createModule("Ink.Dom.Event",1,[],function(){"use strict";var e;e=document.createEvent?["DOMActivate","DOMFocusIn","DOMFocusOut","focus","focusin","focusout","blur","load","unload","abort","error","select","change","submit","reset","resize","scroll","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","wheel","textInput","keydown","keypress","keyup","compositionstart","compositionupdate","compositionend","DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeInsertedIntoDocument","DOMNodeRemovedFromDocument","DOMAttrModified","DOMCharacterDataModified","DOMAttributeNameChanged","DOMElementNameChanged","hashchange"]:["onabort","onactivate","onafterprint","onafterupdate","onbeforeactivate","onbeforecopy","onbeforecut","onbeforedeactivate","onbeforeeditfocus","onbeforepaste","onbeforeprint","onbeforeunload","onbeforeupdate","onblur","onbounce","oncellchange","onchange","onclick","oncontextmenu","oncontrolselect","oncopy","oncut","ondataavailable","ondatasetchanged","ondatasetcomplete","ondblclick","ondeactivate","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onerror","onerrorupdate","onfilterchange","onfinish","onfocus","onfocusin","onfocusout","onhashchange","onhelp","onkeydown","onkeypress","onkeyup","onlayoutcomplete","onload","onlosecapture","onmessage","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onmove","onmoveend","onmovestart","onoffline","ononline","onpage","onpaste","onprogress","onpropertychange","onreadystatechange","onreset","onresize","onresizeend","onresizestart","onrowenter","onrowexit","onrowsdelete","onrowsinserted","onscroll","onselect","onselectionchange","onselectstart","onstart","onstop","onstorage","onstoragecommit","onsubmit","ontimeout","onunload"];var t={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(e,t){t=t||0;var n,o=0,r=function(){var i=+new Date,s=i-o;if(s>=t)return o=i,e.apply(this,[].slice.call(arguments));var a=this,u=[].slice.call(arguments);clearTimeout(n),n=setTimeout(function(){return r.apply(a,u)})};return r},element:function(e){var t=e.target||"mouseout"===e.type&&e.fromElement||"mouseleave"===e.type&&e.fromElement||"mouseover"===e.type&&e.toElement||"mouseenter"===e.type&&e.toElement||e.srcElement||null;return!t||3!==t.nodeType&&4!==t.nodeType?t:t.parentNode},relatedTarget:function(e){var t=e.relatedTarget||"mouseout"===e.type&&e.toElement||"mouseleave"===e.type&&e.toElement||"mouseover"===e.type&&e.fromElement||"mouseenter"===e.type&&e.fromElement||null;return!t||3!==t.nodeType&&4!==t.nodeType?t:t.parentNode},findElement:function(e,t,n){for(var o=this.element(e);;){if(o.nodeName.toLowerCase()===t.toLowerCase())return o;if(o=o.parentNode,!o)return n?!1:document;if(!o.parentNode)return n?!1:document}},fire:function(t,n,o){t=Ink.i(t);var r;if(null!==t&&void 0!==t){t===document&&document.createEvent&&!t.dispatchEvent&&(t=document.documentElement),document.createEvent?(r=document.createEvent("HTMLEvents"),"undefined"==typeof e[n]?r.initEvent("dataavailable",!0,!0):r.initEvent(n,!0,!0)):(r=document.createEventObject(),r.eventType="undefined"==typeof e["on"+n]?"ondataavailable":"on"+n),r.eventName=n,r.memo=o||{};try{if(document.createEvent)t.dispatchEvent(r);else{if(!t.fireEvent)return;t.fireEvent(r.eventType,r)}}catch(i){}return r}},_callbackForCustomEvents:function(e,t,n){var o="hashchange"===t&&e.attachEvent&&!window.onhashchange,r=-1!==t.indexOf(":");if(o||r){var i=n;return Ink.bindEvent(function(e,t,n){e.eventName===t&&(window.addEventListener&&(window.event=e),n())},this,t,i)}return null},observe:function(e,t,n,o){if(e=Ink.i(e),null!==e&&void 0!==e){var r=this._callbackForCustomEvents(e,t,n);return r&&(n=r,t="dataavailable"),e.addEventListener?e.addEventListener(t,n,!!o):e.attachEvent("on"+t,n),n}},observeMulti:function(e,t,n,o){if("string"==typeof e?e=Ink.ss(e):e instanceof Element&&(e=[e]),!e[0])return!1;var r=this._callbackForCustomEvents(e[0],t,n);r&&(n=r,t="dataavailable");for(var i=0,s=e.length;s>i;i++)this.observe(e[i],t,n,o);return n},stopObserving:function(e,t,n,o){e=Ink.i(e),null!==e&&void 0!==e&&(e.removeEventListener?e.removeEventListener(t,n,!!o):e.detachEvent("on"+t,n))},stop:function(e){null!==e.cancelBubble&&(e.cancelBubble=!0),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),window.attachEvent&&(e.returnValue=!1),null!==e.cancel&&(e.cancel=!0)},stopPropagation:function(e){null!==e.cancelBubble&&(e.cancelBubble=!0),e.stopPropagation&&e.stopPropagation()},stopDefault:function(e){e.preventDefault&&e.preventDefault(),window.attachEvent&&(e.returnValue=!1),null!==e.cancel&&(e.cancel=!0)},pointer:function(e){return{x:this.pointerX(e),y:this.pointerY(e)}},pointerX:function(e){return e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(e){return e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},isLeftClick:function(e){if(window.addEventListener){if(0===e.button)return!0;if("touch"===e.type.substring(0,5)&&null===e.button)return!0}else if(1===e.button)return!0;return!1},isRightClick:function(e){return 2===e.button},isMiddleClick:function(e){return window.addEventListener?1===e.button:4===e.button},getCharFromKeyboardEvent:function(e,t){var n=e.keyCode,o=String.fromCharCode(n),r=e.shiftKey;if(n>=65&&90>=n)return"boolean"==typeof t&&(r=t),r?o:o.toLowerCase();if(n>=96&&105>=n)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return o},debug:function(){}};return t});
Ink.createModule("Ink.Dom.FormSerialize",1,[],function(){"use strict";var e={serialize:function(e){e=Ink.i(e);var t=this._getFieldNameInputsMap(e),n={};for(var o in t)if(t.hasOwnProperty(o))if(null!==o){var r=o.replace(/\[\]$/,"");n[r]=this._getValuesOfField(t[o])}else n[o]=this._getValuesOfField(t[o]);return delete n["null"],n},fillIn:function(e,t){e=Ink.i(e);var n=this._getFieldNameInputsMap(e);delete n["null"];for(var o in t)t.hasOwnProperty(o)&&this._setValuesOfField(n[o],t[o])},_getFieldNameInputsMap:function(e){for(var t,n,o,r={},i=0,s=e.elements.length;s>i;++i)o=e.elements[i],t=o.getAttribute("name"),n=o.nodeName.toLowerCase(),"fieldset"!==n&&(void 0===r[t]?r[t]=[o]:r[t].push(o));return r},_getValuesOfField:function(e){var t,n,o,r,i,s,a=e[0].nodeName.toLowerCase(),u=e[0].getAttribute("type"),l=e[0].value,c=[];switch(a){case"select":for(t=0,n=e.length;n>t;++t)for(c[t]=[],s=e[t].getAttribute("multiple"),o=0,r=e[t].options.length;r>o;++o)if(i=e[t].options[o],i.selected){if(!s){c[t]=i.value;break}c[t].push(i.value)}return e.length>0&&/\[[^\]]*\]$/.test(e[0].getAttribute("name"))?c:c[0];case"textarea":case"input":if("checkbox"===u||"radio"===u){for(t=0,n=e.length;n>t;++t)i=e[t],i.checked&&c.push(i.value);return"checkbox"===u?e.length>1?c:!!c.length:e.length>1?c[0]:!!c.length}if(e.length>0&&/\[[^\]]*\]$/.test(e[0].getAttribute("name"))){var p=[];for(t=0,n=e.length;n>t;++t)p.push(e[t].value);return p}return l;default:return void 0}},_valInArray:function(e,t){for(var n=0,o=t.length;o>n;++n)if(t[n]===e)return!0;return!1},_setValuesOfField:function(e,t){if(e){var n,o,r,i=e[0].nodeName.toLowerCase(),s=e[0].getAttribute("type");switch(i){case"select":if(e.length>1)throw"Got multiple select elements with same name!";for(n=0,o=e[0].options.length;o>n;++n)r=e[0].options[n],r.selected=t instanceof Array?this._valInArray(r.value,t):r.value===t;break;case"textarea":case"input":if("checkbox"===s||"radio"===s)for(n=0,o=e.length;o>n;++n)r=e[n],r.checked=t instanceof Array?this._valInArray(r.value,t):e.length>1?r.value===t:!!t;else{if(e.length>1)throw"Got multiple input elements with same name!";"file"!==s&&(e[0].value=t)}break;default:throw'Unsupported element: "'+i+'"!'}}}};return e});
Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var e={_contexts:[],run:function(e,t){t||(t=e,e=window);for(var n,o=0,r=this._contexts.length;r>o;o++)if(this._contexts[o][0]===e){n=this._contexts[o][1];break}n||(n={cbQueue:[],win:e,doc:e.document,root:e.document.documentElement,done:!1,top:!0},n.handlers={checkState:Ink.bindEvent(this._checkState,this,n),poll:Ink.bind(this._poll,this,n)},this._contexts.push([e,n]));var i=n.doc.addEventListener;n.add=i?"addEventListener":"attachEvent",n.rem=i?"removeEventListener":"detachEvent",n.pre=i?"":"on",n.det=i?"DOMContentLoaded":"onreadystatechange",n.wet=n.pre+"load";var s=n.handlers.checkState,a="complete"===n.doc.readyState&&"about:blank"!==n.win.location.toString();if(a)setTimeout(Ink.bind(function(){t.call(n.win,"lazy")},this),0);else{n.cbQueue.push(t),n.doc[n.add](n.det,s),n.win[n.add](n.wet,s);var u=1;try{u=n.win.frameElement}catch(l){}if(!i&&n.root&&n.root.doScroll){try{n.top=!u}catch(l){}n.top&&this._poll(n)}}},_checkState:function(e,t){if(e&&("readystatechange"!==e.type||"complete"===t.doc.readyState)){var n="load"===e.type?t.win:t.doc;n[t.rem](t.pre+e.type,t.handlers.checkState,!1),this._ready(t)}},_poll:function(e){try{e.root.doScroll("left")}catch(t){return setTimeout(e.handlers.poll,50)}this._ready(e)},_ready:function(e){if(!e.done){e.done=!0;for(var t=0;t<e.cbQueue.length;++t)e.cbQueue[t].call(e.win);e.cbQueue=[]}}};return e});
Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";function e(e){return ht.test(e+"")}function t(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>T.cacheLength&&delete e[t.shift()],e[n]=r}}function n(e){return e[P]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t=null}}function o(e,t,n,r){var o,i,s,a,u,p,f,d,h,m;if((t?t.ownerDocument||t:j)!==D&&O(t),t=t||D,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(R&&!r){if(o=mt.exec(e))if(s=o[1]){if(9===a){if(i=t.getElementById(s),!i||!i.parentNode)return n;if(i.id===s)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(s))&&q(t,i)&&i.id===s)return n.push(i),n}else{if(o[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&H.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(s)),n}if(H.qsa&&!M.test(e)){if(f=!0,d=P,h=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(p=l(e),(f=t.getAttribute("id"))?d=f.replace(vt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=p.length;u--;)p[u]=d+c(p[u]);h=dt.test(e)&&t.parentNode||t,m=p.join(",")}if(m)try{return Q.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{f||t.removeAttribute("id")}}}return v(e.replace(at,"$1"),t,n,r)}function i(e,t){var n=t&&e,r=n&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function a(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return n(function(t){return t=+t,n(function(n,r){for(var o,i=e([],n.length,t),s=i.length;s--;)n[o=i[s]]&&(n[o]=!(r[o]=n[o]))})})}function l(e,t){var n,r,i,s,a,u,l,c=J[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){(!n||(r=ut.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),u.push(i=[])),n=!1,(r=lt.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(at," ")}),a=a.slice(n.length));for(s in T.filter)!(r=ft[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?o.error(e):J(e,u).slice(0)}function c(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=X++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var a,u,l,c=B+" "+i;if(s){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=t[P]||(t[P]={}),(u=l[r])&&u[0]===c){if((a=u[1])===!0||a===E)return a===!0}else if(u=l[r]=[c],u[1]=e(t,n,s)||E,u[1]===!0)return!0}}function f(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function d(e,t,n,r,o){for(var i,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(i=e[a])&&(!n||n(i,r,o))&&(s.push(i),l&&t.push(a));return s}function h(e,t,r,o,i,s){return o&&!o[P]&&(o=h(o)),i&&!i[P]&&(i=h(i,s)),n(function(n,s,a,u){var l,c,p,f=[],h=[],m=s.length,g=n||y(t||"*",a.nodeType?[a]:a,[]),v=!e||!n&&t?g:d(g,f,e,a,u),b=r?i||(n?e:m||o)?[]:s:v;if(r&&r(v,b,a,u),o)for(l=d(b,h),o(l,[],a,u),c=l.length;c--;)(p=l[c])&&(b[h[c]]=!(v[h[c]]=p));if(n){if(i||e){if(i){for(l=[],c=b.length;c--;)(p=b[c])&&l.push(v[c]=p);i(null,b=[],l,u)}for(c=b.length;c--;)(p=b[c])&&(l=i?et.call(n,p):f[c])>-1&&(n[l]=!(s[l]=p))}}else b=d(b===s?b.splice(m,b.length):b),i?i(null,s,b,u):Q.apply(s,b)})}function m(e){for(var t,n,r,o=e.length,i=T.relative[e[0].type],s=i||T.relative[" "],a=i?1:0,u=p(function(e){return e===t},s,!0),l=p(function(e){return et.call(t,e)>-1},s,!0),d=[function(e,n,r){return!i&&(r||n!==k)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];o>a;a++)if(n=T.relative[e[a].type])d=[p(f(d),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[P]){for(r=++a;o>r&&!T.relative[e[r].type];r++);return h(a>1&&f(d),a>1&&c(e.slice(0,a-1)).replace(at,"$1"),n,r>a&&m(e.slice(a,r)),o>r&&m(e=e.slice(r)),o>r&&c(e))}d.push(n)}return f(d)}function g(e,t){var r=0,i=t.length>0,s=e.length>0,a=function(n,a,u,l,c){var p,f,h,m=[],g=0,y="0",v=n&&[],b=null!=c,w=k,x=n||s&&T.find.TAG("*",c&&a.parentNode||a),C=B+=null==w?1:Math.random()||.1;for(b&&(k=a!==D&&a,E=r);null!=(p=x[y]);y++){if(s&&p){for(f=0;h=e[f++];)if(h(p,a,u)){l.push(p);break}b&&(B=C,E=++r)}i&&((p=!h&&p)&&g--,n&&v.push(p))}if(g+=y,i&&y!==g){for(f=0;h=t[f++];)h(v,m,a,u);if(n){if(g>0)for(;y--;)v[y]||m[y]||(m[y]=z.call(l));m=d(m)}Q.apply(l,m),b&&!n&&m.length>0&&g+t.length>1&&o.uniqueSort(l)}return b&&(B=C,k=w),v};return i?n(a):a}function y(e,t,n){for(var r=0,i=t.length;i>r;r++)o(e,t[r],n);return n}function v(e,t,n,r){var o,i,s,a,u,p=l(e);if(!r&&1===p.length){if(i=p[0]=p[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&9===t.nodeType&&R&&T.relative[i[1].type]){if(t=(T.find.ID(s.matches[0].replace(wt,Et),t)||[])[0],!t)return n;e=e.slice(i.shift().value.length)}for(o=ft.needsContext.test(e)?0:i.length;o--&&(s=i[o],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(wt,Et),dt.test(i[0].type)&&t.parentNode||t))){if(i.splice(o,1),e=r.length&&c(i),!e)return Q.apply(n,r),n;break}}return N(e,p)(r,t,!R,n,dt.test(e)),n}function b(){}var w,E,T,x,C,N,k,S,I,O,D,A,R,M,_,L,q,P="sizzle"+-new Date,j=window.document,H={},B=0,X=0,F=t(),J=t(),K=t(),U=!1,$=function(){return 0},Y="undefined",V=1<<31,G=[],z=G.pop,W=G.push,Q=G.push,Z=G.slice,et=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},tt="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=nt.replace("w","w#"),ot="([*^$|!~]?=)",it="\\["+tt+"*("+nt+")"+tt+"*(?:"+ot+tt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+rt+")|)|)"+tt+"*\\]",st=":("+nt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+it.replace(3,8)+")*)|.*)\\)|)",at=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),ut=new RegExp("^"+tt+"*,"+tt+"*"),lt=new RegExp("^"+tt+"*([\\x20\\t\\r\\n\\f>+~])"+tt+"*"),ct=new RegExp(st),pt=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),NAME:new RegExp("^\\[name=['\"]?("+nt+")['\"]?\\]"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/[\x20\t\r\n\f]*[+~]/,ht=/^[^{]+\{\s*\[native code/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,vt=/'|\\/g,bt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,wt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Et=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{Q.apply(G=Z.call(j.childNodes),j.childNodes),G[j.childNodes.length].nodeType}catch(Tt){Q={apply:G.length?function(e,t){W.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}C=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},O=o.setDocument=function(t){var n=t?t.ownerDocument||t:j;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,A=n.documentElement,R=!C(n),H.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),H.attributes=r(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),H.getElementsByClassName=r(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),H.getByName=r(function(e){e.id=P+0,e.appendChild(D.createElement("a")).setAttribute("name",P),e.appendChild(D.createElement("i")).setAttribute("name",P),A.appendChild(e);var t=n.getElementsByName&&n.getElementsByName(P).length===2+n.getElementsByName(P+0).length;return A.removeChild(e),t}),H.sortDetached=r(function(e){return e.compareDocumentPosition&&1&e.compareDocumentPosition(D.createElement("div"))}),T.attrHandle=r(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==Y&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},H.getByName?(T.find.ID=function(e,t){if(typeof t.getElementById!==Y&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(wt,Et);return function(e){return e.getAttribute("id")===t}}):(T.find.ID=function(e,t){if(typeof t.getElementById!==Y&&R){var n=t.getElementById(e);return n?n.id===e||typeof n.getAttributeNode!==Y&&n.getAttributeNode("id").value===e?[n]:void 0:[]}},T.filter.ID=function(e){var t=e.replace(wt,Et);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=H.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},T.find.NAME=H.getByName&&function(e,t){return typeof t.getElementsByName!==Y?t.getElementsByName(name):void 0},T.find.CLASS=H.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&R?t.getElementsByClassName(e):void 0},_=[],M=[":focus"],(H.qsa=e(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||M.push("\\["+tt+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||M.push(":checked")}),r(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&M.push("[*^$]="+tt+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(H.matchesSelector=e(L=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(e){H.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),_.push("!=",st)}),M=new RegExp(M.join("|")),_=_.length&&new RegExp(_.join("|")),q=e(A.contains)||A.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=A.compareDocumentPosition?function(e,t){if(e===t)return U=!0,0;var r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return r?1&r||S&&t.compareDocumentPosition(e)===r?e===n||q(j,e)?-1:t===n||q(j,t)?1:I?et.call(I,e)-et.call(I,t):0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,o=0,s=e.parentNode,a=t.parentNode,u=[e],l=[t];if(e===t)return U=!0,0;if(!s||!a)return e===n?-1:t===n?1:s?-1:a?1:0;if(s===a)return i(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;u[o]===l[o];)o++;return o?i(u[o],l[o]):u[o]===j?-1:l[o]===j?1:0},D):D},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==D&&O(e),t=t.replace(bt,"='$1']"),H.matchesSelector&&R&&(!_||!_.test(t))&&!M.test(t))try{var n=L.call(e,t);if(n||H.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return o(t,D,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!==D&&O(e),q(e,t)},o.attr=function(e,t){var n;return(e.ownerDocument||e)!==D&&O(e),R&&(t=t.toLowerCase()),(n=T.attrHandle[t])?n(e):!R||H.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,n=[],r=0,o=0;if(U=!H.detectDuplicates,S=!H.sortDetached,I=!H.sortStable&&e.slice(0),e.sort($),U){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return e},x=o.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r];r++)n+=x(t);return n},T=o.selectors={cacheLength:50,createPseudo:n,match:ft,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Et),e[3]=(e[4]||e[5]||"").replace(wt,Et),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return ft.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ct.test(n)&&(t=l(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(wt,Et).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+tt+")"+e+"("+tt+"|$)"))&&F(e,function(e){return t.test(e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=o.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,m=i!==s?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!u&&!a;if(g){if(i){for(;m;){for(p=t;p=p[m];)if(a?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?g.firstChild:g.lastChild],s&&v){for(c=g[P]||(g[P]={}),l=c[e]||[],d=l[0]===B&&l[1],f=l[0]===B&&l[2],p=d&&g.childNodes[d];p=++d&&p&&p[m]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[B,d,f];break}}else if(v&&(l=(t[P]||(t[P]={}))[e])&&l[0]===B)f=l[1];else for(;(p=++d&&p&&p[m]||(f=d=0)||h.pop())&&((a?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(v&&((p[P]||(p[P]={}))[e]=[B,f]),p!==t)););return f-=o,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var r,i=T.pseudos[e]||T.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return i[P]?i(t):i.length>1?(r=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,n){for(var r,o=i(e,t),s=o.length;s--;)r=et.call(e,o[s]),e[r]=!(n[r]=o[s])}):function(e){return i(e,0,r)}):i}},pseudos:{not:n(function(e){var t=[],r=[],o=N(e.replace(at,"$1"));return o[P]?n(function(e,t,n,r){for(var i,s=o(e,null,r,[]),a=e.length;a--;)(i=s[a])&&(e[a]=!(t[a]=i))}):function(e,n,i){return t[0]=e,o(t,null,i,r),!r.pop()}}),has:n(function(e){return function(t){return o(e,t).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(e){return pt.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(wt,Et).toLowerCase(),function(t){var n;do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===A},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return yt.test(e.nodeName)},input:function(e){return gt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})T.pseudos[w]=a(w);return N=o.compile=function(e,t){var n,r=[],o=[],i=K[e+" "];if(!i){for(t||(t=l(e)),n=t.length;n--;)i=m(t[n]),i[P]?r.push(i):o.push(i);i=K(e,g(o,r))}return i},T.pseudos.nth=T.pseudos.eq,b.prototype=T.filters=T.pseudos,T.setFilters=new b,H.sortStable=P.split("").sort($).join("")===P,O(),[0,0].sort($),H.detectDuplicates=U,{select:o,matches:o.matches,matchesSelector:o.matchesSelector}});
Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var e={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var e=0,t=0;"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),this.windowWidth=e,this.windowHeight=t},setReferrer:function(){this.referrer=void 0!==document.referrer?document.referrer.length>0?window.escape(document.referrer):!1:!1},detectBrowser:function(){var e=navigator.userAgent;if(this.userAgent=e,e=e.toLowerCase(),new RegExp("applewebkit/").test(e))new RegExp("chrome/").test(e)?(this.CHROME=!0,this.model="chrome",this.version=e.replace(new RegExp("(.*)chrome/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit"):(this.SAFARI=!0,this.model="safari",this.version=e.replace(new RegExp("(.*)applewebkit/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit");else if(new RegExp("opera").test(e))this.OPERA=!0,this.model="opera",this.version=e.replace(new RegExp("(.*)opera.([^\\s$]+)(.*)"),"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(new RegExp("konqueror").test(e))this.KONQUEROR=!0,this.model="konqueror",this.version=e.replace(new RegExp("(.*)konqueror/([^;]+);(.*)"),"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(new RegExp("msie\\ ").test(e))this.IE=!0,this.model="ie",this.version=e.replace(new RegExp("(.*)\\smsie\\s([^;]+);(.*)"),"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(new RegExp("gecko").test(e)){this.GECKO=!0;var t=new RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");if(t.test(e))this.model=e.match(t)[1],this.version=e.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2"),this.cssPrefix="-moz-",this.domPrefix="Moz";else{this.model="mozilla";var n=new RegExp("(.*)rv:([^)]+)(.*)");n.test(e)&&(this.version=e.replace(n,"$2")),this.cssPrefix="-moz-",this.domPrefix="Moz"}}},debug:function(){var e="known browsers: (ie, gecko, opera, safari, konqueror) \n";e+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",e+="model -> "+this.model+"\n",e+="version -> "+this.version+"\n",e+="\n",e+="original UA -> "+this.userAgent,alert(e)}};return e.init(),e});
Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";var e="function"==typeof document.createRange&&"function"==typeof Range.prototype.createContextualFragment,t="Ink.Dom.Element tbody: "+Math.random(),n=function(){var e=document.createElement("div");return e.innerHTML="<table>",0!==e.getElementsByTagName("tbody").length}(),r={get:function(e){return"undefined"!=typeof e?"string"==typeof e?document.getElementById(e):e:null},create:function(e,t){var n=document.createElement(e);for(var o in t)t.hasOwnProperty(o)&&(o in r?r[o](n,t[o]):"className"===o||"class"===o?n.className=t.className||t["class"]:n.setAttribute(o,t[o]));return n},remove:function(e){var t;e&&(t=e.parentNode)&&t.removeChild(e)},scrollTo:function(e){if(e=r.get(e)){if(e.scrollIntoView)return e.scrollIntoView();var t={},n=0,o=0;do n+=e.offsetTop||0,o+=e.offsetLeft||0,e=e.offsetParent;while(e);t={x:o,y:n},window.scrollTo(t.x,t.y)}},offsetTop:function(e){return r.offset(e)[1]},offsetLeft:function(e){return r.offset(e)[0]},positionedOffset:function(e){var t=0,n=0;e=r.get(e);do if(t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent){if("body"===e.tagName.toLowerCase())break;var o=e.style.position;if(!o&&e.currentStyle&&(o=e.currentStyle.position),(!o||"auto"===o)&&"undefined"!=typeof getComputedStyle){var i=getComputedStyle(e,null);o=i?i.position:null}if("relative"===o||"absolute"===o)break}while(e);return[n,t]},offset:function(e){e=Ink.i(e);var t,n,o,i,s=["border-left-width","border-top-width"],a=[0,0],u=r._getPropPx,l=Ink.getModule("Ink.Dom.Browser",1);do i=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle,t=[0|e.offsetLeft,0|e.offsetTop],n=[u(i,s[0]),u(i,s[1])],l.OPERA?(a[0]+=t[0],a[1]+=t[1]):(a[0]+=t[0]+n[0],a[1]+=t[1]+n[1]),o=e.offsetParent;while(e=o);return n=[u(i,s[0]),u(i,s[1])],l.GECKO?(a[0]+=n[0],a[1]+=n[1]):l.OPERA||(a[0]-=n[0],a[1]-=n[1]),a},scroll:function(e){return e=e?Ink.i(e):document.body,[window.pageXOffset?window.pageXOffset:e.scrollLeft,window.pageYOffset?window.pageYOffset:e.scrollTop]},_getPropPx:function(e,t){var n,r,o=e.getPropertyValue?e.getPropertyValue(t):e[t];return o?(r=o.indexOf("px"),n=-1===r?0:parseInt(o,10)):n=0,n},offset2:function(e){return r.offset(e)},hasAttribute:function(e,t){return e.hasAttribute?e.hasAttribute(t):!!e.getAttribute(t)},insertAfter:function(e,t){(t=r.get(t))&&t.parentNode.insertBefore(e,t.nextSibling)},insertBefore:function(e,t){(t=r.get(t))&&t.parentNode.insertBefore(e,t)},insertTop:function(e,t){(t=r.get(t))&&(t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e))},insertBottom:function(e,t){t.appendChild(e)},textContent:function(e){e=Ink.i(e);var t,n,o,i;switch(e&&e.nodeType){case 9:return r.textContent(e.documentElement||e.body&&e.body.parentNode||e.body);case 1:if(t=e.innerText,"undefined"!=typeof t)return t;case 11:if(t=e.textContent,"undefined"!=typeof t)return t;if(e.firstChild===e.lastChild)return r.textContent(e.firstChild);for(t=[],o=e.childNodes,n=0,i=o.length;i>n;++n)t.push(r.textContent(o[n]));return t.join("");case 3:case 4:return e.nodeValue}return""},setTextContent:function(e,t){switch(e=Ink.i(e),e&&e.nodeType){case 1:if("innerText"in e){e.innerText=t;break}case 11:if("textContent"in e){e.textContent=t;break}case 9:for(;e.firstChild;)e.removeChild(e.firstChild);if(""!==t){var n=e.ownerDocument||e;e.appendChild(n.createTextNode(t))}break;case 3:case 4:e.nodeValue=t}},isLink:function(e){var t=e&&1===e.nodeType&&(/^a|area$/i.test(e.tagName)||e.hasAttributeNS&&e.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!t},isAncestorOf:function(e,t){if(!t||!e)return!1;if(t.compareDocumentPosition)return 0!==(16&e.compareDocumentPosition(t));for(;t=t.parentNode;)if(t===e)return!0;return!1},descendantOf:function(e,t){return e!==t&&r.isAncestorOf(e,t)},firstElementChild:function(e){if(!e)return null;if("firstElementChild"in e)return e.firstElementChild;for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t},lastElementChild:function(e){if(!e)return null;if("lastElementChild"in e)return e.lastElementChild;for(var t=e.lastChild;t&&1!==t.nodeType;)t=t.previousSibling;return t},nextElementSibling:function(e){var t=null;if(!e)return t;if("nextElementSibling"in e)return e.nextElementSibling;for(t=e.nextSibling;t&&1!==t.nodeType;)t=t.nextSibling;return t},previousElementSibling:function(e){var t=null;if(!e)return t;if("previousElementSibling"in e)return e.previousElementSibling;for(t=e.previousSibling;t&&1!==t.nodeType;)t=t.previousSibling;return t},elementWidth:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetWidth},elementHeight:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetHeight},elementLeft:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetLeft},elementTop:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetTop},elementDimensions:function(e){return e=Ink.i(e),[e.offsetWidth,e.offsetHeight]},outerDimensions:function(e){var t=Element.elementDimensions(e),n=Ink.getModule("Ink.Dom.Css_1");return[t[0]+parseFloat(n.getStyle(e,"marginLeft")||0)+parseFloat(n.getStyle(e,"marginRight")||0),t[1]+parseFloat(n.getStyle(e,"marginTop")||0)+parseFloat(n.getStyle(e,"marginBottom")||0)]},inViewport:function(e,t){var n=Ink.i(e).getBoundingClientRect();return t?n.bottom>0&&n.left<r.viewportWidth()&&n.top<r.viewportHeight()&&n.right>0:n.top>0&&n.right<r.viewportWidth()&&n.bottom<r.viewportHeight()&&n.left>0},clonePosition:function(e,t){var n=r.offset(t);return e.style.left=n[0]+"px",e.style.top=n[1]+"px",e},ellipsizeText:function(e,t){if(e=Ink.i(e))for(;e&&e.scrollHeight>e.offsetHeight+8;)e.textContent=e.textContent.replace(/(\s+\S+)\s*$/,t||"")},findUpwardsHaving:function(e,t){for(;e&&1===e.nodeType;){if(t(e))return e;e=e.parentNode}return!1},findUpwardsByClass:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)"),o=function(e){var t=e.className;return t&&n.test(t)};return r.findUpwardsHaving(e,o)},findUpwardsByTag:function(e,t){t=t.toUpperCase();var n=function(e){return e.nodeName&&e.nodeName.toUpperCase()===t};return r.findUpwardsHaving(e,n)},findUpwardsById:function(e,t){var n=function(e){return e.id===t};return r.findUpwardsHaving(e,n)},findUpwardsBySelector:function(e,t){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");var n=function(e){return Ink.Dom.Selector.matchesSelector(e,t)};return r.findUpwardsHaving(e,n)},getChildrenText:function(e,t){var n,o,i,s=e.childNodes,a=s.length,u="";if(!e)return u;for(o=0;a>o;++o)n=s[o],n&&3===n.nodeType&&(i=r._trimString(String(n.data)),i.length>0?(u+=i,t&&e.removeChild(n)):e.removeChild(n));return u},_trimString:function(e){return String.prototype.trim?e.trim():e.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(e){for(var t=Ink.i(e),n=[],r=0;r<t.options.length;++r)n.push(t.options[r].value);return n},_normalizeData:function(e){for(var t,n=[],r=0,o=e.length;o>r;++r)t=e[r],t instanceof Array?1===t.length&&t.push(t[0]):t=[t,t],n.push(t);return n},fillSelect:function(e,t,n,o){var i=Ink.i(e);if(i){i.innerHTML="";var s,a;n||(a=document.createElement("option"),a.setAttribute("value",""),i.appendChild(a)),t=r._normalizeData(t);for(var u=0,l=t.length;l>u;++u)s=t[u],a=document.createElement("option"),a.setAttribute("value",s[0]),s.length>2&&a.setAttribute("extra",s[2]),a.appendChild(document.createTextNode(s[1])),s[0]===o&&a.setAttribute("selected","selected"),i.appendChild(a)}},fillSelect2:function(e,t){e=Ink.i(e),e.innerHTML="";var n={skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create",optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist",defaultValue:""};if(!t)throw"param opts is a requirement!";if(!t.data)throw"opts.data is a requirement!";t=Ink.extendObj(n,t);var o,i,s=document.createElement("optgroup");s.setAttribute("label",t.optionsGroupLabel),t.data=r._normalizeData(t.data),t.skipCreate||t.data.unshift(["$create$",t.createLabel]),t.skipEmpty||t.data.unshift(["",t.emptyLabel]);for(var a=0,u=t.data.length;u>a;++a)i=t.data[a],o=document.createElement("option"),o.setAttribute("value",i[0]),o.appendChild(document.createTextNode(i[1])),i[0]===t.defaultValue&&o.setAttribute("selected","selected"),""===i[0]||"$create$"===i[0]?e.appendChild(o):s.appendChild(o);var l=function(e){var t=e[e.length-1][0];return""===t||"$create$"===t};l(t.data)&&(o=document.createElement("option"),o.setAttribute("value","$dummy$"),o.setAttribute("disabled","disabled"),o.appendChild(document.createTextNode(t.emptyOptionsGroupLabel)),s.appendChild(o)),e.appendChild(s);var c=function(t,n){var r=e.options[e.options.length-1];r.getAttribute("disabled")&&r.parentNode.removeChild(r),r=document.createElement("option"),r.setAttribute("value",t),r.appendChild(document.createTextNode(n)),s.appendChild(r),e.options[e.options.length-1].setAttribute("selected",!0)};t.skipCreate||(e.onchange=function(){"$create$"===e.value&&"function"==typeof t.onCreate&&t.onCreate(e,c)})},fillRadios:function(e,t,n,o,i,s){var a=Ink.i(e);for(a=a.nextSibling;a&&1!==a.nodeType;)a=a.nextSibling;var u=document.createElement("span");a?a.parentNode.insertBefore(u,a):Ink.i(e).appendChild(u),n=r._normalizeData(n),"]"!==t.substring(t.length-1)&&(t+="[]");var l,c;o||(c=document.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("name",t),c.setAttribute("value",""),u.appendChild(c),s&&u.appendChild(document.createElement(s)));for(var d=0;d<n.length;++d)l=n[d],c=document.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("name",t),c.setAttribute("value",l[0]),u.appendChild(c),u.appendChild(document.createTextNode(l[1])),s&&u.appendChild(document.createElement(s)),l[0]===i&&(c.checked=!0);return u},fillChecks:function(e,t,n,o,i){var s=Ink.i(e);for(s=s.nextSibling;s&&1!==s.nodeType;)s=s.nextSibling;var a=document.createElement("span");s?s.parentNode.insertBefore(a,s):Ink.i(e).appendChild(a),n=r._normalizeData(n),"]"!==t.substring(t.length-1)&&(t+="[]");for(var u,l,c=0;c<n.length;++c)u=n[c],l=document.createElement("input"),l.setAttribute("type","checkbox"),l.setAttribute("name",t),l.setAttribute("value",u[0]),a.appendChild(l),a.appendChild(document.createTextNode(u[1])),i&&a.appendChild(document.createElement(i)),u[0]===o&&(l.checked=!0);return a},parentIndexOf:function(e,t){for(var n,r=0,o=0,i=e.childNodes.length;i>o;++o)if(n=e.childNodes[o],1===n.nodeType){if(n===t)return r;++r}return-1},nextSiblings:function(e){if("string"==typeof e&&(e=document.getElementById(e)),"object"==typeof e&&null!==e&&e.nodeType&&1===e.nodeType){for(var t=[],n=e.parentNode.children,o=r.parentIndexOf(e.parentNode,e),i=++o,s=n.length;s>i;i++)t.push(n[i]);return t}return[]},previousSiblings:function(e){if("string"==typeof e&&(e=document.getElementById(e)),"object"==typeof e&&null!==e&&e.nodeType&&1===e.nodeType){for(var t=[],n=e.parentNode.children,o=r.parentIndexOf(e.parentNode,e),i=0,s=o;s>i;i++)t.push(n[i]);return t}return[]},siblings:function(e){if("string"==typeof e&&(e=document.getElementById(e)),"object"==typeof e&&null!==e&&e.nodeType&&1===e.nodeType){for(var t=[],n=e.parentNode.children,r=0,o=n.length;o>r;r++)e!==n[r]&&t.push(n[r]);return t}return[]},childElementCount:function(e){return e=Ink.i(e),"childElementCount"in e?e.childElementCount:e?r.siblings(e).length+1:0},_wrapElements:{TABLE:function(e,r){return e.innerHTML=n?"<table>"+r+"<tbody><tr><td>"+t+"</tr></td></tbody></table>":"<table>"+r+"</table>",e.firstChild},TBODY:function(e,t){return e.innerHTML="<table><tbody>"+t+"</tbody></table>",e.firstChild.getElementsByTagName("tbody")[0]},THEAD:function(e,t){return e.innerHTML="<table><thead>"+t+"</thead><tbody></tbody></table>",e.firstChild.getElementsByTagName("thead")[0]},TFOOT:function(e,t){return e.innerHTML="<table><tfoot>"+t+"</tfoot><tbody></tbody></table>",e.firstChild.getElementsByTagName("tfoot")[0]},TR:function(e,t){return e.innerHTML="<table><tbody><tr>"+t+"</tr></tbody></table>",e.firstChild.firstChild.firstChild}},_getWrapper:function(e,o){var i=e.nodeName&&e.nodeName.toUpperCase(),s=document.createElement("div"),a=r._wrapElements[i];if(!a)return s.innerHTML=o,s;if(s=a(s,o),n&&"TABLE"===i)for(var u=s.getElementsByTagName("td"),l=0,c=u.length;c>l;l++)if(u[l].innerHTML===t){var d=u[l].parentNode.parentNode;d.parentNode.removeChild(d)}return s},appendHTML:function(e,t){for(var n=r._getWrapper(e,t);n.firstChild;)e.appendChild(n.firstChild)},prependHTML:function(e,t){for(var n=r._getWrapper(e,t);n.lastChild;)e.insertBefore(n.lastChild,e.firstChild)},setHTML:function(e,t){for(r._getWrapper(e,t);e.firstChild;)e.removeChild(e.firstChild);r.appendHTML(e,t)},wrap:function(e,t){e=Ink.i(e),t=Ink.i(t);var n=e.nextSibling,r=e.parentNode;return t.appendChild(e),null!==n?r.insertBefore(t,n):r.appendChild(t),t},removeTextNodeChildren:function(e){var t,n,r=e;for(e=e.firstChild;e;)n=3===e.nodeType,t=e,e=e.nextSibling,n&&r.removeChild(t)},htmlToFragment:e?function(e){var t;return"string"!=typeof e?document.createDocumentFragment():(t=document.createRange(),t.selectNode(document.body),t.createContextualFragment(e))}:function(e){var t,n,r=document.createDocumentFragment();if("string"!=typeof e)return r;for(t=document.createElement("div"),t.innerHTML=e;n=t.firstChild;)r.appendChild(n);return r},_camelCase:function(e){return e?e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}):e},data:function(e){var t;if("object"!=typeof e&&"string"!=typeof e)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof e)t=e;else{var n=Ink.getModule("Ink.Dom.Selector",1);if(!n)throw"[Ink.Dom.Element.data] :: this method requires Ink.Dom.Selector - v1";if(t=n.select(e),t.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";t=t[0]}var o,i,s,a={},u=t.attributes||[];if(u)for(var l=0,c=u.length;c>l;++l)o=u[l],i=o.name,s=o.value,i&&0===i.indexOf("data-")&&(a[r._camelCase(i.replace("data-",""))]=s);return a},moveCursorTo:function(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else{var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},pageWidth:function(){var e;e=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var t;return window.self.innerWidth?t=document.documentElement.clientWidth?document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?t=document.documentElement.clientWidth:document.body&&(t=document.body.clientWidth),t>e?e:t},pageHeight:function(){var e;e=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var t;return window.self.innerHeight?t=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?t=document.documentElement.clientHeight:document.body&&(t=document.body.clientHeight),t>e?t:e},viewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement&&"undefined"!=typeof document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement&&"undefined"!=typeof document.documentElement.offsetHeight?document.documentElement.offsetHeight:void 0},scrollWidth:function(){return"undefined"!=typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return"undefined"!=typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return r});
Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var e={addRemoveClassName:function(e,t,n){return n?this.addClassName(e,t):(this.removeClassName(e,t),void 0)},addClassName:function(e,t){e=Ink.i(e),e&&t&&("undefined"!=typeof e.classList?e.classList.add(t):this.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t))},removeClassName:function(e,t){if(e=Ink.i(e),e&&t)if("undefined"!=typeof e.classList)e.classList.remove(t);else{if("undefined"==typeof e.className)return!1;var n=e.className,r=new RegExp("(^|\\s+)"+t+"(\\s+|$)");n=n.replace(r," "),n=n.replace(/^\s+/,"").replace(/\s+$/,""),e.className=n}},setClassName:function(e,t,n){this.addRemoveClassName(e,t,n||!1)},hasClassName:function(e,t){if(e=Ink.i(e),e&&t){if("undefined"!=typeof e.classList)return e.classList.contains(t);if("undefined"==typeof e.className)return!1;var n=e.className;if("undefined"==typeof n.length)return!1;if(n.length>0){if(n===t)return!0;var r=new RegExp("(^|\\s)"+t+"(\\s|$)");if(r.test(n))return!0}}return!1},blinkClass:function(e,t,n,r){e=Ink.i(e),this.addRemoveClassName(e,t,!r),setTimeout(Ink.bind(function(){this.addRemoveClassName(e,t,r)},this),Number(n)||100)},toggleClassName:function(e,t,n){return e&&t&&"undefined"!=typeof e.classList?(e=Ink.i(e),null!==e&&e.classList.toggle(t),!0):("undefined"!=typeof n?n===!0?this.addClassName(e,t):n===!1&&this.removeClassName(e,t):this.hasClassName(e,t)?this.removeClassName(e,t):this.addClassName(e,t),void 0)},setOpacity:function(e,t){if(e=Ink.i(e),null!==e){var n=1;isNaN(Number(t))||(n=0>=t?0:1>=t?t:100>=t?t/100:1),"undefined"!=typeof e.style.opacity?e.style.opacity=n:e.style.filter="alpha(opacity:"+(0|100*n)+")"}},_camelCase:function(e){return e?e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}):e},getStyle:function(e,t){if(e=Ink.i(e),null!==e){t="float"===t?"cssFloat":this._camelCase(t);var n=e.style[t];if(!window.getComputedStyle||n&&"auto"!==n)!n&&e.currentStyle&&(n=e.currentStyle[t],"auto"!==n||"width"!==t&&"height"!==t||(n=e["offset"+t.charAt(0).toUpperCase()+t.slice(1)]+"px"));else{var r=window.getComputedStyle(e,null);n=r?r[t]:null}if("opacity"===t)return n?parseFloat(n,10):1;if("borderTopWidth"===t||"borderBottomWidth"===t||"borderRightWidth"===t||"borderLeftWidth"===t){if("thin"===n)return"1px";if("medium"===n)return"3px";if("thick"===n)return"5px"}return"auto"===n?null:n}},setStyle:function(e,t){if(e=Ink.i(e),null!==e)if("string"==typeof t)e.style.cssText+="; "+t,-1!==t.indexOf("opacity")&&this.setOpacity(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var n in t)t.hasOwnProperty(n)&&("opacity"===n?this.setOpacity(e,t[n]):"float"===n||"cssFloat"===n?"undefined"==typeof e.style.styleFloat?e.style.cssFloat=t[n]:e.style.styleFloat=t[n]:e.style[n]=t[n])},show:function(e,t){e=Ink.i(e),null!==e&&(e.style.display=t?t:"")},hide:function(e){e=Ink.i(e),null!==e&&(e.style.display="none")},showHide:function(e,t){e=Ink.i(e),e&&(e.style.display=t?"":"none")},toggle:function(e,t){e=Ink.i(e),null!==e&&("undefined"!=typeof t?t===!0?this.show(e):this.hide(e):"none"===e.style.display?this.show(e):this.hide(e))},_getRefTag:function(e){if(e.firstElementChild)return e.firstElementChild;for(var t=e.firstChild;t;t=t.nextSibling)if(1===t.nodeType)return t;return null},appendStyleTag:function(e,t,n){n=Ink.extendObj({type:"text/css",force:!1},n||{});var r,o,i=document.getElementsByTagName("style"),s=!1,a=!0;for(r=0,o=i.length;o>r;r++)s=i[r].innerHTML,s.indexOf(e)>=0&&(a=!1);if(a){var l=document.createElement("style"),u=document.getElementsByTagName("head")[0],c=!1,d="";l.type=n.type,d+=e+" {",d+=t,d+="} ","undefined"!=typeof l.styleSheet?l.styleSheet.cssText=d:l.appendChild(document.createTextNode(d)),n.force?u.appendChild(l):(c=this._getRefTag(u),c&&u.insertBefore(l,c))}},appendStylesheet:function(e,t){t=Ink.extendObj({media:"screen",type:"text/css",force:!1},t||{});var n,r=document.createElement("link"),o=document.getElementsByTagName("head")[0];r.media=t.media,r.type=t.type,r.href=e,r.rel="Stylesheet",t.force?o.appendChild(r):(n=this._getRefTag(o),n&&o.insertBefore(r,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(e,t){if(!e)return t(e);if(this._loadedCSSFiles[e])return t(e);var n=this._loadingCSSFiles[e];if(n)return n.push(t);this._loadingCSSFiles[e]=[t];var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e;var o=document.getElementsByTagName("head")[0];o.appendChild(r);var i=document.createElement("img");i.onerror=Ink.bindEvent(function(e,t){var n=t;this._loadedCSSFiles[n]=!0;for(var r=this._loadingCSSFiles[n],o=0,i=r.length;i>o;++o)r[o](n);delete this._loadingCSSFiles[n]},this,e),i.src=e},decToHex:function(e){var t=function(e){return 1===e.length&&(e="0"+e),e=e.toUpperCase()};if("object"==typeof e){var n=t(parseInt(e.r,10).toString(16)),r=t(parseInt(e.g,10).toString(16)),o=t(parseInt(e.b,10).toString(16));return n+r+o}e+="";var i=e.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==i?t(parseInt(i[1],10).toString(16))+t(parseInt(i[2],10).toString(16))+t(parseInt(i[3],10).toString(16)):t(parseInt(e,10).toString(16))},hexToDec:function(e){return 0===e.indexOf("#")&&(e=e.substr(1)),6===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)}:3===e.length?{r:parseInt(e.charAt(0)+e.charAt(0),16),g:parseInt(e.charAt(1)+e.charAt(1),16),b:parseInt(e.charAt(2)+e.charAt(2),16)}:e.length<=2?parseInt(e,16):void 0},getPropertyFromStylesheet:function(e,t){var n=this.getRuleFromStylesheet(e);return n?n.style[t]:null},getPropertyFromStylesheet2:function(e,t){for(var n,r=this.getRulesFromStylesheet(e),o=0,i=r.length;i>o;o++)if(n=r[o].style[t],null!==n&&void 0!==n)return n;return null},getRuleFromStylesheet:function(e){var t,n,r,o,i,s=document.styleSheets;if(!s)return null;for(var a=0,l=document.styleSheets.length;l>a;++a){if(t=document.styleSheets[a],n=t.rules?t.rules:t.cssRules,!n)return null;for(r=0,o=n.length;o>r;++r)if(i=n[r],i.selectorText&&i.selectorText===e)return i}return null},getRulesFromStylesheet:function(e){var t,n,r,o,i,s=[],a=document.styleSheets;if(!a)return s;for(var l=0,u=document.styleSheets.length;u>l;++l){if(t=document.styleSheets[l],n=t.rules?t.rules:t.cssRules,!n)return null;for(r=0,o=n.length;o>r;++r)i=n[r],i.selectorText&&i.selectorText===e&&s.push(i)}return s},getPropertiesFromRule:function(e){var t,n,r,o=this.getRuleFromStylesheet(e),i={};o=o.style.cssText;var s,a,l,u,c=o.split(";");for(n=0,r=c.length;r>n;++n)" "===c[n].charAt(0)&&(c[n]=c[n].substring(1)),s=c[n].split(":"),t=this._camelCase(s[0].toLowerCase()),a=s[1],a&&(a=a.substring(1),"padding"===t||"margin"===t||"borderWidth"===t?("borderWidth"===t?(l="border",u="Width"):(l=t,u=""),-1!==a.indexOf(" ")?(a=a.split(" "),i[l+"Top"+u]=a[0],i[l+"Bottom"+u]=a[0],i[l+"Left"+u]=a[1],i[l+"Right"+u]=a[1]):(i[l+"Top"+u]=a,i[l+"Bottom"+u]=a,i[l+"Left"+u]=a,i[l+"Right"+u]=a)):"borderRadius"===t?-1!==a.indexOf(" ")?(a=a.split(" "),i.borderTopLeftRadius=a[0],i.borderBottomRightRadius=a[0],i.borderTopRightRadius=a[1],i.borderBottomLeftRadius=a[1]):(i.borderTopLeftRadius=a,i.borderTopRightRadius=a,i.borderBottomLeftRadius=a,i.borderBottomRightRadius=a):i[t]=a);return i},changeFontSize:function(e,t,n,r,o){var i=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(s){var a;if("string"!=typeof e?a="1st argument must be a CSS selector rule.":"number"!=typeof t?a="2nd argument must be a number.":void 0!==n&&"+"!==n&&"*"!==n?a='3rd argument must be one of "+", "*".':void 0!==r&&("number"!=typeof r||0>=r)?a="4th argument must be a positive number.":void 0!==o&&("number"!=typeof o||o>o)&&(a="5th argument must be a positive number greater than minValue."),a)throw new TypeError(a);var l,u,c=s.select(e);void 0===r&&(r=1),n="*"===n?function(e,t){return e*t}:function(e,t){return e+t};for(var d=0,f=c.length;f>d;++d)u=c[d],l=parseFloat(i.getStyle(u,"fontSize")),l=n(l,t),r>l||"number"==typeof o&&l>o||(u.style.fontSize=l+"px")})}};return e});
Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(e){var t=""+e;return 1===t.length?"0"+t:t}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,date_toISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(e){return e.getUTCFullYear()+"-"+twoDigits(e.getUTCMonth()+1)+"-"+twoDigits(e.getUTCDate())+"T"+twoDigits(e.getUTCHours())+":"+twoDigits(e.getUTCMinutes())+":"+twoDigits(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(e){var t={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/([\x00-\x1f\\"])/g,function(e,n){var r=t[n];return r?r:(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})),e},_toUnicode:function(e){if(this._convertToUnicode){for(var t="",n=!1,r=!1,o=0,i=e.length;i>o;){if(n=e.charCodeAt(o),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)r=34===n||92===n||47===n?"\\"+e.charAt(o):8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":e.charAt(o);else if(this._convertToUnicode){for(r=e.charCodeAt(o).toString(16)+"".toUpperCase();r.length<4;)r="0"+r;r="\\u"+r}else r=e.charAt(o);t+=r,o++}return t}return this._escape(e)},_stringifyValue:function(e){if("string"==typeof e)return'"'+this._toUnicode(e)+'"';if("number"!=typeof e||!isNaN(e)&&isFinite(e)){if("undefined"==typeof e||null===e)return"null";if("function"==typeof e.toJSON){var t=e.toJSON();return"string"==typeof t?'"'+this._escape(t)+'"':this._escape(t.toString())}if("number"==typeof e||"boolean"==typeof e)return""+e;if("function"==typeof e)return"null";if(e.constructor===Date)throw"";if(e.constructor===Array){for(var n="",r=0,o=e.length;o>r;r++)r>0&&(n+=","),n+=this._stringifyValue(e[r]);return"["+n+"]"}var i="";for(var s in e)({}).hasOwnProperty.call(e,s)&&(""!==i&&(i+=","),i+='"'+this._escape(s)+'": '+this._stringifyValue(e[s]));return"{"+i+"}"}return"null"},stringify:function(e,t){return this._convertToUnicode=!!t,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(e):this._stringifyValue(e)},parse:function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson});
Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var e=Array.prototype,t={inArray:function(e,t){if("object"==typeof t)for(var n=0,r=t.length;r>n;++n)if(t[n]===e)return!0;return!1},sortMulti:function(e,t){if("undefined"==typeof e||e.constructor!==Array)return!1;if("string"!=typeof t)return e.sort();if(e.length>0){if("undefined"==typeof e[0][t])return!1;e.sort(function(e,n){var r=e[t],o=n[t];return o>r?-1:r>o?1:0})}return e},keyValue:function(e,t,n){if("undefined"!=typeof e&&"object"==typeof t&&this.inArray(e,t)){for(var r=[],o=0,i=t.length;i>o;++o)if(t[o]===e){if("undefined"!=typeof n&&n===!0)return o;r.push(o)}return r}return!1},shuffle:function(e){if("undefined"!=typeof e&&e.constructor!==Array)return!1;for(var t=e.length,n=!1,r=!1;t--;)r=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[r],e[r]=n;return e},forEach:function(t,n,r){if(e.forEach)return e.forEach.call(t,n,r);for(var o=0,i=t.length>>>0;i>o;o++)n.call(r,t[o],o,t)},each:function(){t.forEach.apply(t,[].slice.call(arguments))},map:function(t,n,r){if(e.map)return e.map.call(t,n,r);for(var o=new Array(s),i=0,s=t.length>>>0;s>i;i++)o[i]=n.call(r,t[i],i,t);return o},filter:function(t,n,r){if(e.filter)return e.filter.call(t,n,r);for(var o=[],i=null,s=0,a=t.length;a>s;s++)i=t[s],n.call(r,i,s,t)&&o.push(i);return o},some:function(e,t,n){if(null===e)throw new TypeError("First argument is invalid.");var r=Object(e),o=r.length>>>0;if("function"!=typeof t)throw new TypeError("Second argument must be a function.");for(var i=0;o>i;i++)if(i in r&&t.call(n,r[i],i,r))return!0;return!1},intersect:function(e,t){if(!e||!t||e instanceof Array==!1||t instanceof Array==!1)return[];for(var n=[],r=0,o=e.length;o>r;++r)for(var i=0,s=t.length;s>i;++i)e[r]===t[i]&&n.push(e[r]);return n},convert:function(t){return e.slice.call(t||[],0)},insert:function(e,t,n){e.splice(t,0,n)},remove:function(e,t,n){for(var r=[],o=0,i=e.length;i>o;o++)o>=t&&t+n>o||r.push(e[o]);return r}};return t});
Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var e={_months:function(e){var t=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return t[e]},_iMonth:function(e){return Number(e)?+e-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"maro":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[e.toLowerCase()]},_wDays:function(e){var t=["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"];return t[e]},_iWeek:function(e){return Number(e)?+e||7:{segunda:1,seg:1,"tera":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"sbado":6,"sb":6,domingo:7,dom:7}[e.toLowerCase()]},_daysInMonth:function(e,t){var n;return n=1===e||3===e||5===e||7===e||8===e||10===e||12===e?31:4===e||6===e||9===e||11===e?30:0===t%400||0===t%4&&0!==t%100?29:28},get:function(e,t){("undefined"==typeof e||""===e)&&(e="Y-m-d");var n,r=e.split(""),o=new Array(r.length),i="\\";n="undefined"==typeof t?new Date:"number"==typeof t?new Date(1e3*t):new Date(t);for(var a,s,u,l=0;l<r.length;l++)switch(r[l]){case i:o[l]=r[l+1],l++;break;case"d":var c=n.getDate();o[l]=String(c).length>1?c:"0"+c;break;case"D":o[l]=this._wDays(n.getDay()).substring(0,3);break;case"j":o[l]=n.getDate();break;case"l":o[l]=this._wDays(n.getDay());break;case"N":o[l]=n.getDay()||7;break;case"S":var d=n.getDate(),f=["st","nd","rd"],p="";o[l]=d>=11&&13>=d?"th":(p=f[String(d).substr(-1)-1])?p:"th";break;case"w":o[l]=n.getDay();break;case"z":a=Date.UTC(n.getFullYear(),0,0),s=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o[l]=Math.floor((s-a)/864e5);break;case"W":var h=new Date(n.getFullYear(),0,1);a=h.getDay()||7;var m=Math.floor((n-h)/864e5+1);o[l]=Math.ceil((m-(8-a))/7)+1;break;case"F":o[l]=this._months(n.getMonth());break;case"m":var g=String(n.getMonth()+1);o[l]=g.length>1?g:"0"+g;break;case"M":o[l]=this._months(n.getMonth()).substring(0,3);break;case"n":o[l]=n.getMonth()+1;break;case"t":o[l]=this._daysInMonth(n.getMonth()+1,n.getYear());break;case"L":var y=n.getFullYear();o[l]=y%4?!1:y%100?!0:y%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":o[l]=n.getFullYear();break;case"y":o[l]=String(n.getFullYear()).substring(2);break;case"a":o[l]=n.getHours()<12?"am":"pm";break;case"A":o[l]=n.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":u=n.getHours(),o[l]=12>=u?u:u-12;break;case"G":o[l]=String(n.getHours());break;case"h":u=String(n.getHours()),u=12>=u?u:u-12,o[l]=u.length>1?u:"0"+u;break;case"H":u=String(n.getHours()),o[l]=u.length>1?u:"0"+u;break;case"i":var v=String(n.getMinutes());o[l]=v.length>1?v:"0"+v;break;case"s":var b=String(n.getSeconds());o[l]=b.length>1?b:"0"+b;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":a=new Date(n.getFullYear(),0,1),o[l]=n.getTimezoneOffset()!==a.getTimezoneOffset()?1:0;break;case"O":var w=n.getTimezoneOffset(),E=w%60;u=String(-1*((w-E)/60)),"-"!==u.charAt(0)&&(u="+"+u),u=3===u.length?u:u.replace(/([+\-])(\d)/,"$10$2"),o[l]=u+E+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[l]=60*n.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var C=this._wDays(n.getDay()).substr(0,3),k=this._months(n.getMonth()).substr(0,3);o[l]=C+", "+n.getDate()+" "+k+this.get(" Y H:i:s O",n);break;case"U":o[l]=Math.floor(n.getTime()/1e3);break;default:o[l]=r[l]}return o.join("")},set:function(e,t){if("undefined"!=typeof t){("undefined"==typeof e||""===e)&&(e="Y-m-d");for(var n,r=e.split(""),o=new Array(r.length),i="\\",a={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},s=0,u=0;u<r.length;u++)switch(r[u]){case i:o[u]=r[u+1],u++;break;case"d":o[u]="(\\d{2})",a.day={original:u,match:s++};break;case"j":o[u]="(\\d{1,2})",a.day={original:u,match:s++};break;case"D":o[u]="([\\w]{3})",a.dayW={original:u,match:s++};break;case"l":o[u]="([\\w]{5,7})",a.dayW={original:u,match:s++};break;case"N":o[u]="(\\d)",a.dayW={original:u,match:s++};break;case"w":o[u]="(\\d)",a.dayW={original:u,match:s++};break;case"S":o[u]="\\w{2}";break;case"z":o[u]="(\\d{1,3})",a.dayY={original:u,match:s++};break;case"W":o[u]="(\\d{1,2})",a.week={original:u,match:s++};break;case"F":o[u]="([\\w]{4,9})",a.month={original:u,match:s++};break;case"M":o[u]="(\\w{3})",a.month={original:u,match:s++};break;case"m":o[u]="(\\d{2})",a.month={original:u,match:s++};break;case"n":o[u]="(\\d{1,2})",a.month={original:u,match:s++};break;case"t":o[u]="\\d{2}";break;case"L":o[u]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":o[u]="(\\d{4})",a.year={original:u,match:s++};break;case"y":o[u]="(\\d{2})",("undefined"==typeof a.year||"Y"!==r[a.year.original])&&(a.year={original:u,match:s++});break;case"a":o[u]="(am|pm)",a.ampm={original:u,match:s++};break;case"A":o[u]="(AM|PM)",a.ampm={original:u,match:s++};break;case"B":throw'"B" not implemented!';case"g":o[u]="(\\d{1,2})",a.hourD={original:u,match:s++};break;case"G":o[u]="(\\d{1,2})",a.hour={original:u,match:s++};break;case"h":o[u]="(\\d{2})",a.hourD={original:u,match:s++};break;case"H":o[u]="(\\d{2})",a.hour={original:u,match:s++};break;case"i":o[u]="(\\d{2})",a.min={original:u,match:s++};break;case"s":o[u]="(\\d{2})",a.sec={original:u,match:s++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":o[u]="\\d";break;case"O":o[u]="([-+]\\d{4})",a.diffH={original:u,match:s++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[u]="(\\-?\\d{1,5})",a.diffM={original:u,match:s++};break;case"c":throw'"c" not implemented!';case"r":o[u]="([\\w]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",a.date={original:u,match:s++};break;case"U":o[u]="(\\d{1,13})",a.date={original:u,match:s++};break;default:o[u]=r[u]}var l=new RegExp(o.join(""));try{if(n=t.match(l),!n)return}catch(c){return}var d,f,p="undefined"!=typeof a.date,h="undefined"!=typeof a.year,m="undefined"!=typeof a.dayY,g="undefined"!=typeof a.day,y="undefined"!=typeof a.month,v=y&&g,b=!y&&g,w="undefined"!=typeof a.dayW,E="undefined"!=typeof a.week,C=E&&w,k=!E&&w,x=m||v||!h&&b||C||!h&&k,T=!(h||m||g||y||w||E),S="undefined"!=typeof a.hourD&&"undefined"!=typeof a.ampm,N="undefined"!=typeof a.hour,I=S||N,D="undefined"!=typeof a.min,A="undefined"!=typeof a.sec,O="undefined"!=typeof a.msec,R=!T||I,M=R||D,_="undefined"!=typeof a.diffM,H="undefined"!=typeof a.diffH;if(p){if("U"===r[a.date.original])return new Date(1e3*+n[a.date.match+1]);var L=n[a.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return d=+L[4]+ +L[7].slice(0,3),f=+L[5]+60*((L[7].slice(0,1)+L[7].slice(3))/100),new Date(L[3],this._iMonth(L[2]),L[1],d,f,L[6])}var P,B,j,F,q,W,U,$=new Date;if(x||T){if(x){if(h){var Y=$.getFullYear()-50+"";P=n[a.year.match+1],"y"===r[a.year.original]&&(P=+Y.slice(0,2)+(P>=Y.slice(2)?0:1)+P)}else P=$.getFullYear();if(m)B=0,j=n[a.dayY.match+1];else if(g)B=y?this._iMonth(n[a.month.match+1]):$.getMonth(),j=n[a.day.match+1];else{B=0;var X;X=E?n[a.week.match+1]:this.get("W",$),j=7*(X-2)+(8-(new Date(P,0,1).getDay()||7))+this._iWeek(n[a.week.match+1])}if(0===B&&j>31){var J=new Date(P,B,j);B=J.getMonth(),j=J.getDate()}}else P=$.getFullYear(),B=$.getMonth(),j=$.getDate();return F=P+"-"+(B+1)+"-"+j+" ",d=S?+n[a.hourD.match+1]+("pm"===n[a.ampm.match+1]?12:0):N?n[a.hour.match+1]:T?$.getHours():"00",f=D?n[a.min.match+1]:R?"00":$.getMinutes(),q=A?n[a.sec.match+1]:M?"00":$.getSeconds(),W=O?n[a.msec.match+1]:"000",U=H?n[a.diffH.match+1]:_?String(100*(-1*n[a.diffM.match+1]/60)).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(F+d+":"+f+":"+q+"."+W+U)}}}};return e});
Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var e={_tab:"",_formatParam:function(e){var t="";switch(typeof e){case"string":t="(string) "+e;break;case"number":t="(number) "+e;break;case"boolean":t="(boolean) "+e;break;case"object":t=null!==e?e.constructor===Array?"Array \n{\n"+this._outputFormat(e,0)+"\n}":"Object \n{\n"+this._outputFormat(e,0)+"\n}":"null";break;default:t=!1}return t},_getTabs:function(e){for(var t="",n=0;e>n;n++)t+=this._tab;return t},_outputFormat:function(e,t){var n="",r=!1;for(var o in e)if(null!==e[o])if("object"!=typeof e[o]||e[o].constructor!==Array&&e[o].constructor!==Object){if(e[o].constructor===Function)continue;n=n+this._tab+this._getTabs(t)+"["+o+"] => "+e[o]+"\n"}else e[o].constructor===Array?r="Array":e[o].constructor===Object&&(r="Object"),n+=this._tab+this._getTabs(t)+"["+o+"] => <b>"+r+"</b>\n",n+=this._tab+this._getTabs(t)+"{\n",n+=this._outputFormat(e[o],t+1)+this._tab+this._getTabs(t)+"}\n";else n=n+this._tab+this._getTabs(t)+"["+o+"] => null \n";return n},printDump:function(e,t){if(t&&"undefined"!=typeof t)if("string"==typeof t)document.getElementById(t).innerHTML="<pre>"+this._formatParam(e)+"</pre>";else{if("object"!=typeof t)throw"TARGET must be an element or an element ID";t.innerHTML="<pre>"+this._formatParam(e)+"</pre>"}else document.write("<pre>"+this._formatParam(e)+"</pre>")},returnDump:function(e){return this._formatParam(e)},alertDump:function(e){window.alert(this._formatParam(e).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(e){var t="dumperwindow_"+1e4*Math.random(),n=window.open("",t,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");n.document.open(),n.document.write("<pre>"+this._formatParam(e)+"</pre>"),n.document.close(),n.focus()}};return e});
Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var e=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,t=function(e,t){return"function"==typeof e?e.apply(this,t):void 0!==typeof e?e:""},n=function(e,t,r){return this instanceof n?(this.reset().lang(t).testMode(r).append(e||{},t),void 0):new n(e,t,r)};return n.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},append:function(e){return this._dicts.push(e),this._dict=Ink.extendObj(this._dict,e[this._lang]),this},lang:function(e){if(!arguments.length)return this._lang;if(e&&this._lang!==e){this._lang=e,this._dict={};for(var t=0,n=this._dicts.length;n>t;t++)this._dict=Ink.extendObj(this._dict,this._dicts[t][e]||{})}return this},testMode:function(e){return arguments.length?(void 0!==e&&(this._testMode=!!e),this):!!this._testMode},getKey:function(e){var t,r=this._gLang,o=this._lang;return e in this._dict?t=this._dict[e]:(n.lang(o),t=this._gDict[e],n.lang(r)),t},text:function(n){if("string"==typeof n){var r=Array.prototype.slice.call(arguments,1),o=0,i="object"==typeof r[0],a=this.getKey(n);return void 0===a&&(a=this._testMode?"["+n+"]":n),"number"==typeof a&&(a+=""),"string"==typeof a?a=a.replace(e,function(e,n,a,s){var u=n?n:a?r[a-(i?0:1)]:s?r[0][s]||"":r[o++ +(i?1:0)];return t(u,[o].concat(r))}):"function"==typeof a?a.apply(this,r):a instanceof Array?t(a[r[0]],r):"object"==typeof a?t(a[r[0]],r):""}},ntext:function(e,t,n){var r,o=Array.prototype.slice.apply(arguments);if(2===o.length&&"number"==typeof t){if(r=this.getKey(e),!(r instanceof Array))return"";o.splice(0,1),r=r[1===t?0:1]}else o.splice(0,2),r=1===n?e:t;return this.text.apply(this,[r].concat(o))},ordinal:function(e){if(void 0===e)return"";var n=+e.toString().slice(-1),r=this.getKey("_ordinals");if(void 0===r)return"";if("string"==typeof r)return r;var o;return"function"==typeof r&&(o=r(e,n),"string"==typeof o)?o:"exceptions"in r&&(o="function"==typeof r.exceptions?r.exceptions(e,n):e in r.exceptions?t(r.exceptions[e],[e,n]):void 0,"string"==typeof o)?o:"byLastDigit"in r&&(o="function"==typeof r.byLastDigit?r.byLastDigit(n,e):n in r.byLastDigit?t(r.byLastDigit[n],[n,e]):void 0,"string"==typeof o)?o:"default"in r&&(o=t(r["default"],[e,n]),"string"==typeof o)?o:""},alias:function(){var e=Ink.bind(n.prototype.text,this);return e.ntext=Ink.bind(n.prototype.ntext,this),e.append=Ink.bind(n.prototype.append,this),e.ordinal=Ink.bind(n.prototype.ordinal,this),e.testMode=Ink.bind(n.prototype.testMode,this),e}},n.reset=function(){n.prototype._gDicts=[],n.prototype._gDict={},n.prototype._gLang="pt_PT"},n.reset(),n.append=function(e,t){if(t){if(!(t in e)){var r={};r[t]=e,e=r}t!==n.prototype._gLang&&n.lang(t)}n.prototype._gDicts.push(e),Ink.extendObj(n.prototype._gDict,e[n.prototype._gLang])},n.lang=function(e){if(!arguments.length)return n.prototype._gLang;if(e&&n.prototype._gLang!==e){n.prototype._gLang=e,n.prototype._gDict={};for(var t=0,r=n.prototype._gDicts.length;r>t;t++)Ink.extendObj(n.prototype._gDict,n.prototype._gDicts[t][e]||{})}},n});
Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var e={get:function(e){var t=document.cookie||!1,n={};if(t){t=t.replace(new RegExp("; ","g"),";");var r=t.split(";"),o=[];if(r.length>0)for(var i=0;i<r.length;i++)o=r[i].split("="),2===o.length&&(n[o[0]]=decodeURIComponent(o[1])),o=[]}return e?"undefined"!=typeof n[e]?n[e]:null:n},set:function(e,t,n,r,o,i){var a;if(!e||t===!1||"undefined"==typeof e||"undefined"==typeof t)return!1;a=e+"="+encodeURIComponent(t);var s=!1,u=!1,l=!1,c=!1;if(n&&"undefined"!=typeof n&&!isNaN(n)){var d=new Date,f=parseInt(Number(d.valueOf()),10)+1e3*Number(parseInt(n,10)),p=new Date(f),h=p.toGMTString(),m=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");h=h.replace(m,"$1$2-$3-$4"),s="expires="+h}else s="undefined"==typeof n||isNaN(n)||0!==Number(parseInt(n,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";if(u=r&&"undefined"!=typeof r?"path="+r:"path=/",o&&"undefined"!=typeof o)l="domain="+o;else{var g=new RegExp(":(.*)");l="domain="+window.location.host,l=l.replace(g,"")}c=i&&"undefined"!=typeof i?i:!1,document.cookie=a+"; "+s+"; "+u+"; "+l+"; "+c},remove:function(e,t,n){var r=!1,o=!1,i=-999999999;r=t&&"undefined"!=typeof t?t:"/",o=n&&"undefined"!=typeof n?n:window.location.host,this.set(e,"deleted",i,r,o)}};return e});
Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",'"',"","<",">","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(e,t){var n=t?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return e?String(e).replace(n,function(e,t,n,r){return t+n.toUpperCase()+r.toLowerCase()}):e},trim:function(e){return"string"==typeof e?e.replace(/^\s+|\s+$|\n+$/g,""):e},stripTags:function(e,t){if(t&&"string"==typeof t){for(var n=InkUtilString.trim(t).split(","),r=[],o=!1,i=0;i<n.length;i++)""!==InkUtilString.trim(n[i])&&(o=InkUtilString.trim(n[i].replace(/(\<|\>)/g,"").replace(/\s/,"")),r.push("(<"+o+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+o+">)"));for(var a=r.join("|"),s=new RegExp(a,"i"),u=e.match(new RegExp("<[^>]*>","g")),l=0;l<u.length;l++)u[l].match(s)||(e=e.replace(new RegExp(u[l],"gm"),""));return e}return e.replace(/\<[^\>]+\>/g,"")},htmlEntitiesEncode:function(e){if(e&&e.replace)for(var t=!1,n=0;n<InkUtilString._chars.length;n++)t=new RegExp(InkUtilString._chars[n],"gm"),e=e.replace(t,"&"+InkUtilString._entities[n]+";");return e},htmlEntitiesDecode:function(e){if(e&&e.replace){for(var t=!1,n=0;n<InkUtilString._entities.length;n++)t=new RegExp("&"+InkUtilString._entities[n]+";","gm"),e=e.replace(t,InkUtilString._chars[n]);e=e.replace(/&#[^;]+;?/g,function(e){return"x"===e.charAt(2)?String.fromCharCode(parseInt(e.substring(3),16)):String.fromCharCode(parseInt(e.substring(2),10))})}return e},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|63&r>>6),t+=String.fromCharCode(128|63&r))}return t},shortString:function(e,t){for(var n=e.split(" "),r="",o=0;o<n.length;o++){if((r+n[o]+" ").length>=t){r+="&hellip;";break}r+=n[o]+" "}return r},truncateString:function(e,t){return e.length-1>t?e.substr(0,t-1)+"":e},utf8Decode:function(e){for(var t="",n=0,r=0,o=0,i=0;n<e.length;)r=e.charCodeAt(n),128>r?(t+=String.fromCharCode(r),n++):r>191&&224>r?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),n+=3);return t},removeAccentedChars:function(e){for(var t=e,n=!1,r=0;r<InkUtilString._accentedChars.length;r++)n=new RegExp(InkUtilString._accentedChars[r],"gm"),t=t.replace(n,""+InkUtilString._accentedRemovedChars[r]);return t},substrCount:function(e,t){return e?e.split(t).length-1:0},evalJSON:function(strJSON,sanitize){if("undefined"==typeof sanitize||null===sanitize||InkUtilString.isJSON(strJSON))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(e){return e=e.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(e)},htmlEscapeUnsafe:function(e){var t=InkUtilString._htmlUnsafeChars;return null!=e?String(e).replace(/[<>&'"]/g,function(e){return t[e]}):e},normalizeWhitespace:function(e){return null!=e?InkUtilString.trim(String(e).replace(/\s+/g," ")):e},toUnicode:function(e){if("string"==typeof e){for(var t="",n=!1,r=!1,o=e.length,i=0;o>i;){if(n=e.charCodeAt(i),n>=32&&126>=n||8==n||9==n||10==n||12==n||13==n||32==n||34==n||47==n||58==n||92==n)r=8==n?"\\b":9==n?"\\t":10==n?"\\n":12==n?"\\f":13==n?"\\r":e.charAt(i);else{for(r=e.charCodeAt(i).toString(16)+"".toUpperCase();r.length<4;)r="0"+r;r="\\u"+r}t+=r,i++}return t}},escape:function(e){var t=e.charCodeAt(0).toString(16).split("");if(t.length<3){for(;t.length<2;)t.unshift("0");t.unshift("x")}else{for(;t.length<4;)t.unshift("0");t.unshift("u")}return t.unshift("\\"),t.join("")},unescape:function(e){var t=e.lastIndexOf("0");t=-1===t?2:Math.min(t,2);var n=e.substring(t),r=parseInt(n,16);return String.fromCharCode(r)},escapeText:function(e,t){void 0===t&&(t=["[","]","'",","]);for(var n,r,o=[],i=0,a=e.length;a>i;++i)n=e[i],r=n.charCodeAt(0),(32>r||r>126&&-1===t.indexOf(n))&&(n=InkUtilString.escape(n)),o.push(n);return o.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(e){for(var t;t=InkUtilString.escapedCharRegex.exec(e);)t=t[0],e=e.replace(t,InkUtilString.unescape(t)),InkUtilString.escapedCharRegex.lastIndex=0;return e},strcmp:function(e,t){return e===t?0:e>t?1:-1},packetize:function(e,t){for(var n,r=e.length,o=new Array(Math.ceil(r/t)),i=e.split(""),a=0;r;)n=Math.min(t,r),o[a++]=i.splice(0,n).join(""),r-=n;return o}};return InkUtilString});
Ink.createModule("Ink.Util.Swipe","1",["Ink.Dom.Event_1"],function(e){"use strict";var t=function(e,t){this._options=Ink.extendObj({callback:void 0,forceAxis:void 0,maxDist:void 0,maxDuration:void 0,minDist:void 0,minDuration:void 0,stopEvents:!0,storeGesture:!1},t||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._element=Ink.i(e),this._init()};return t._supported="ontouchstart"in document.documentElement,t.prototype={_init:function(){var t=document.body;e.observe(t,"touchstart",this._handlers.down),this._options.storeGesture&&e.observe(t,"touchmove",this._handlers.move),e.observe(t,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(e,t){if(e){do{if(e===t)return!0;e=e.parentNode}while(e);return!1}},_onDown:function(t){1===event.changedTouches.length&&this._isMeOrParent(t.target,this._element)&&(this._options.stopEvents===!0&&e.stop(t),t=t.changedTouches[0],this._isOn=!0,this._target=t.target,this._t0=(new Date).valueOf(),this._p0=[t.pageX,t.pageY],this._options.storeGesture&&(this._gesture=[this._p0],this._time=[0]))},_onMove:function(t){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents===!0&&e.stop(t),t=t.changedTouches[0];var n=(new Date).valueOf(),r=.001*(n-this._t0);this._gesture.push([t.pageX,t.pageY]),this._time.push(r)}},_onUp:function(t){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents&&e.stop(t),t=t.changedTouches[0],this._isOn=!1;var n=(new Date).valueOf(),r=[t.pageX,t.pageY],o=.001*(n-this._t0),i=[r[0]-this._p0[0],r[1]-this._p0[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=Math.abs(i[0])>Math.abs(i[1])?"x":"y",u=this._options;if(!(u.minDist&&a<u.minDist||u.maxDist&&a>u.maxDist||u.minDuration&&o<u.minDuration||u.maxDuration&&o>u.maxDuration||u.forceAxis&&s!==u.forceAxis)){var l={upEvent:t,elementId:this._element.id,duration:o,dr:i,dist:a,axis:s,target:this._target};this._options.storeGesture&&(l.gesture=this._gesture,l.time=this._time),this._options.callback(this,l)}}}},t});
Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(e,t){var n,r,o,i=-1!==e.indexOf("?"),a=[e];for(r in t)t.hasOwnProperty(r)&&(i?n="&":(n="?",i=!0),o=t[r],"number"==typeof o||o||(o=""),a=a.concat([n,encodeURIComponent(r),"=",encodeURIComponent(o)]));return a.join("")},getQueryString:function(e){var t;t=e&&"undefined"!=typeof e?e:this.getUrl();var n={};if(t.match(/\?(.+)/i)){var r=t.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(r.length>0)for(var o=r.split(/[;&]/),i=0;i<o.length;i++){var a=o[i].split("=");n[decodeURIComponent(a[0])]="undefined"!=typeof a[1]&&a[1]?decodeURIComponent(a[1]):!1}}return n},getAnchor:function(e){var t;t=e&&"undefined"!=typeof e?e:this.getUrl();var n=!1;return t.match(/#(.+)/)&&(n=t.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(e){var t;t=e&&"undefined"!=typeof e?e:this.getUrl();var n={};if(t.match(/#(.+)/i)){var r=t.replace(/^([^#]+)#(.*)?/g,"$2");if(r.length>0)for(var o=r.split(/[;&]/),i=0;i<o.length;i++){var a=o[i].split("=");n[decodeURIComponent(a[0])]="undefined"!=typeof a[1]&&a[1]?decodeURIComponent(a[1]):!1}}return n},parseUrl:function(e){var t={};if(e&&"undefined"!=typeof e&&"string"==typeof e){if(e.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;e.match(n)&&(t.scheme=e.replace(n,"$1"),t.host=e.replace(n,"$2"),t.path="/"+e.replace(n,"$3"),t.query=e.replace(n,"$4")||!1,t.fragment=e.replace(n,"$5")||!1)}else{var r=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),o=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),i=new RegExp("^([^\\?]+)\\??","i");e.match(r)?(t.scheme=!1,t.host=!1,t.path=e.replace(r,"$1"),t.query=e.replace(r,"$2"),t.fragment=e.replace(r,"$3")):e.match(o)?(t.scheme=!1,t.host=!1,t.path=e.replace(o,"$1"),t.query=e.replace(o,"$2"),t.fragment=!1):e.match(i)&&(t.scheme=!1,t.host=!1,t.path=e.replace(i,"$1"),t.query=!1,t.fragment=!1)}if(t.host){var a=new RegExp("^(.*)\\:(\\d+)$","i");if(t.host.match(a)){var s=t.host;t.host=s.replace(a,"$1"),t.port=s.replace(a,"$2")}else t.port=!1;if(t.host.match(/@/i)){var u=t.host;t.host=u.split("@")[1];var l=u.split("@")[0];l.match(/\:/)?(t.user=l.split(":")[0],t.pass=l.split(":")[1]):(t.user=l,t.pass=!1)}}}return t},currentScriptElement:function(e){var t=document.getElementsByTagName("script");if("undefined"==typeof e)return t.length>0?t[t.length-1]:!1;for(var n=!1,r=new RegExp(""+e,"i"),o=0,i=t.length;i>o;o++)if(n=t[o],r.test(n.src))return n;return!1},_debug:function(){}};return e});
Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var e={_countryCodes:["AO","CV","MZ","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de sr",243:"santarm",244:"leiria",245:"portalegre",249:"torres novas",251:"valena",252:"vila nova de famalico",253:"braga",254:"peso da rgua",255:"penafiel",256:"so joo da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ranha",263:"vila franca de xira",265:"setbal",266:"vora",268:"estremoz",269:"santiago do cacm",271:"guarda",272:"castelo branco",273:"bragana",274:"proena-a-nova",275:"covilh",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portimo",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do herosmo, graciosa, so jorge, terceira",296:"ponta delgada, so miguel, santa maria",91:"rede mvel 91 (Vodafone / Yorn)",93:"rede mvel 93 (Optimus)",96:"rede mvel 96 (TMN)",92:"rede mvel 92 (TODOS)",707:"nmero nico",760:"nmero nico",800:"nmero grtis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"mvel 91",95:"mvel 95",97:"mvel 97",98:"mvel 98",99:"mvel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"mvel 91",92:"mvel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"mvel 82",84:"mvel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"mvel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","-"],unicodeAlpha:["a-zA-Z","-","-","-"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["	 "],newline:["\n"],whitespace:["	\n\f\r "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","-","",""],unicodePunctuation:["!-/",":-@","[-`","{-~","-","","","-","-","-"]},createRegExp:function(t){var n="^[";for(var r in t)if(t.hasOwnProperty(r)){if(!(r in e._characterGroups))throw new Error("group "+r+" is not a valid character group");t[r]&&(n+=e._characterGroups[r].join(""))}return new RegExp(n+"]*?$")},checkCharacterGroups:function(t,n){return e.createRegExp(n).test(t)},unicode:function(t,n){return e.checkCharacterGroups(t,Ink.extendObj({unicodeAlpha:!0},n))},latin1:function(t,n){return e.checkCharacterGroups(t,Ink.extendObj({latin1Alpha:!0},n))},ascii:function(t,n){return e.checkCharacterGroups(t,Ink.extendObj({asciiAlpha:!0},n))},number:function(t,n){t+="";var r=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},n||{});if(r.thousandSep)return t=t.replace(new RegExp("\\"+r.thousandSep,"g"),""),r.thousandSep="",e.number(t,r);if(r.negative===!1)return r.min=0,r.negative=!0,e.number(t,r);if("."!==r.decimalSep&&(t=t.replace(new RegExp("\\"+r.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(t)||""===t)return!1;var i;if(r.decimalSep&&-1!==t.indexOf(r.decimalSep)){if(i=t.split(r.decimalSep),null!==r.decimalPlaces&&i[1].length>r.decimalPlaces)return!1}else i=[""+t,""];if(null!==r.maxDigits&&i[0].replace(/-/g,"").length>r.maxDigits)return i;var o=parseFloat(t);return null!==r.maxExcl&&o>=r.maxExcl||null!==r.minExcl&&o<=r.minExcl?!1:null!==r.max&&o>r.max||null!==r.min&&o<r.min?!1:r.returnNumber?o:!0},_isLeapYear:function(e){var t=/^\d{4}$/;return t.test(e)?e%4?!1:e%100?!0:e%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(e,t){var n=0;return n=1===e||3===e||5===e||7===e||8===e||10===e||12===e?31:4===e||6===e||9===e||11===e?30:0===t%400||0===t%4&&0!==t%100?29:28},_isValidDate:function(e,t,n){var r=/^\d{4}$/,i=/^\d{1,2}$/;return r.test(e)&&i.test(t)&&i.test(n)&&t>=1&&12>=t&&n>=1&&this._daysInMonth(t,e)>=n?!0:!1},email:function(e){var t=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return t.test(e)?!0:!1},mail:function(t){return e.email(t)},url:function(e,t){if("undefined"==typeof t||t===!1){var n=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(e)===!1&&(e="http://"+e)}var r=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return r.test(e)===!1?!1:!0},isPTPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosPT)"string"==typeof this._indicativosPT[n]&&t.push(n);var r=t.join("|"),i=/^(00351|\+351)/;i.test(e)&&(e=e.replace(i,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var a=/[\d]{9}/i;if(9===e.length&&a.test(e)){var s=new RegExp("^("+r+")");if(s.test(e))return!0}return!1},isPortuguesePhone:function(e){return this.isPTPhone(e)},isCVPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosCV)"string"==typeof this._indicativosCV[n]&&t.push(n);var r=t.join("|"),i=/^(00238|\+238)/;i.test(e)&&(e=e.replace(i,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var a=/[\d]{7}/i;if(7===e.length&&a.test(e)){var s=new RegExp("^("+r+")");if(s.test(e))return!0}return!1},isAOPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosAO)"string"==typeof this._indicativosAO[n]&&t.push(n);var r=t.join("|"),i=/^(00244|\+244)/;i.test(e)&&(e=e.replace(i,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var a=/[\d]{9}/i;if(9===e.length&&a.test(e)){var s=new RegExp("^("+r+")");if(s.test(e))return!0}return!1},isMZPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosMZ)"string"==typeof this._indicativosMZ[n]&&t.push(n);var r=t.join("|"),i=/^(00258|\+258)/;i.test(e)&&(e=e.replace(i,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var a=/[\d]{8,9}/i;if((9===e.length||8===e.length)&&a.test(e)){var s=new RegExp("^("+r+")");if(s.test(e)){if(0===e.indexOf("2")&&8===e.length)return!0;if(0===e.indexOf("8")&&9===e.length)return!0}}return!1},isTLPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosTL)"string"==typeof this._indicativosTL[n]&&t.push(n);var r=t.join("|"),i=/^(00670|\+670)/;i.test(e)&&(e=e.replace(i,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var a=/[\d]{7}/i;if(7===e.length&&a.test(e)){var s=new RegExp("^("+r+")");if(s.test(e))return!0}return!1},isPhone:function(){var e;if(0===arguments.length)return!1;var t=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](t);throw"Invalid Country Code!"}var n;for(e=0;e<arguments[1].length;e++){if("function"!=typeof(n=this["is"+arguments[1][e].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(n(t))return!0}}else for(e=0;e<this._countryCodes.length;e++)if(this["is"+this._countryCodes[e]+"Phone"](t))return!0;return!1},codPostal:function(e,t,n){var r=/^(\s*\-\s*|\s+)$/,i=/^\s+|\s+$/g,o=/^[1-9]\d{3}$/,a=/^\d{3}$/,s=/^(.{4})(.*)(.{3})$/;if(n=!!n,e=e.replace(i,""),"undefined"!=typeof t){if(t=t.replace(i,""),o.test(e)&&a.test(t))return n===!0?[!0,!0]:!0}else{if(o.test(e))return n===!0?[!0,!1]:!0;var u=e.match(s);if(null!==u&&o.test(u[1])&&r.test(u[2])&&a.test(u[3]))return n===!0?[!0,!1]:!0}return n===!0?[!1,!1]:!1},isDate:function(e,t){if("undefined"==typeof this._dateParsers[e])return!1;var n=this._dateParsers[e].year,r=this._dateParsers[e].month,i=this._dateParsers[e].day,o=this._dateParsers[e].parser,a=this._dateParsers[e].sep,s=t.match(o);if(null!==s&&s[2]===s[4]&&s[2]===a){var u=2===s[n].length?"20"+s[n].toString():s[n];if(this._isValidDate(u,s[r].toString(),s[i].toString()))return!0}return!1},isColor:function(e){var t,n=!1,r=/^[a-zA-Z]+$/,i=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,o=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,a=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,s=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,u=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(r.test(e)||i.test(e))return!0;var l;if(null!==(t=o.exec(e))||null!==(t=a.exec(e)))for(l=t.length;l--;){if((2===l||4===l||6===l)&&"undefined"!=typeof t[l]&&""!==t[l]){if(!("undefined"!=typeof t[l-1]&&t[l-1]>=0&&t[l-1]<=100))return!1;n=!0}if(1===l||3===l||5===l&&("undefined"==typeof t[l+1]||""===t[l+1])){if(!("undefined"!=typeof t[l]&&t[l]>=0&&t[l]<=255))return!1;n=!0}}if(null!==(t=s.exec(e))||null!==(t=u.exec(e)))for(l=t.length;l--;){if(3===l||5===l){if(!("undefined"!=typeof t[l-1]&&"undefined"!=typeof t[l]&&""!==t[l]&&t[l-1]>=0&&t[l-1]<=100))return!1;n=!0}if(1===l){if(!("undefined"!=typeof t[l]&&t[l]>=0&&t[l]<=360))return!1;n=!0}}return n},isIP:function(e,t){if("string"!=typeof e)return!1;switch(t=(t||"ipv4").toLowerCase()){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e);default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(e){if(e=parseInt(e,10),"number"!=typeof e&&0!==e%1)return!1;e+="";var t,n=e.length,r=0;for(t=n-1;t>=0;t-=2)r+=parseInt(e.substr(t,1),10);for(t=n-2;t>=0;t-=2){var i=parseInt(2*e.substr(t,1),10);r+=i>=10?i-9:i}return 0===r%10},isCreditCard:function(e,t){if(/\d+/.test(e)===!1)return!1;if("undefined"==typeof t)t="default";else if("array"==typeof t){var n,r=t.length;for(n=0;r>n;n++)if(this.isCreditCard(e,t[n]))return!0;return!1}if(t=t.toLowerCase(),"undefined"==typeof this._creditCardSpecs[t])return!1;var i=e.length+"";return-1===this._creditCardSpecs[t].length.split(",").indexOf(i)?!1:this._creditCardSpecs[t].prefix.test(e)?this._creditCardSpecs[t].luhn===!1?!0:this._luhn(e):!1}};return e});
Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";var e=function(e,t){this.init(e,t)};e.prototype={init:function(e,t){this.root={x:0,y:0,w:e,h:t}},fit:function(e){var t,n,r;for(t=0;t<e.length;++t)r=e[t],(n=this.findNode(this.root,r.w,r.h))&&(r.fit=this.splitNode(n,r.w,r.h))},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e}};var t=function(){};t.prototype={fit:function(e){var t,n,r,i=e.length,o=i>0?e[0].w:0,a=i>0?e[0].h:0;for(this.root={x:0,y:0,w:o,h:a},t=0;i>t;t++)r=e[t],r.fit=(n=this.findNode(this.root,r.w,r.h))?this.splitNode(n,r.w,r.h):this.growNode(r.w,r.h)},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e},growNode:function(e,t){var n=e<=this.root.w,r=t<=this.root.h,i=r&&this.root.h>=this.root.w+e,o=n&&this.root.w>=this.root.h+t;return i?this.growRight(e,t):o?this.growDown(e,t):r?this.growRight(e,t):n?this.growDown(e,t):null},growRight:function(e,t){this.root={used:!0,x:0,y:0,w:this.root.w+e,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:e,h:this.root.h}};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null},growDown:function(e,t){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+t,down:{x:0,y:this.root.h,w:this.root.w,h:t},right:this.root};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null}};var n={random:function(){return Math.random()-.5},w:function(e,t){return t.w-e.w},h:function(e,t){return t.h-e.h},a:function(e,t){return t.area-e.area},max:function(e,t){return Math.max(t.w,t.h)-Math.max(e.w,e.h)},min:function(e,t){return Math.min(t.w,t.h)-Math.min(e.w,e.h)},height:function(e,t){return n.msort(e,t,["h","w"])},width:function(e,t){return n.msort(e,t,["w","h"])},area:function(e,t){return n.msort(e,t,["a","h","w"])},maxside:function(e,t){return n.msort(e,t,["max","min","h","w"])},msort:function(e,t,r){var i,o;for(o=0;o<r.length;++o)if(i=n[r[o]](e,t),0!==i)return i;return 0}},r=function(){return[this.w," x ",this.h].join("")},i={binPack:function(i){var o,a,s;for(o=0,a=i.blocks.length;a>o;++o)s=i.blocks[o],"area"in s||(s.area=s.w*s.h);var u=i.dimensions?new e(i.dimensions[0],i.dimensions[1]):new t;i.sorter||(i.sorter="maxside"),i.blocks.sort(n[i.sorter]),u.fit(i.blocks);var l=[u.root.w,u.root.h],c=[],d=[];for(o=0,a=i.blocks.length;a>o;++o)s=i.blocks[o],s.fit?c.push(s):(s.toString=r,d.push(s));var f=l[0]*l[1],h=0;for(o=0,a=c.length;a>o;++o)s=c[o],h+=s.area;return{dimensions:l,filled:h/f,blocks:i.blocks,fitted:c,unfitted:d}}};return i});
Ink.createModule("Ink.UI.Common","1",["Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(e,t,n,r){"use strict";var i={},o=0,a={Layouts:{SMALL:"small",MEDIUM:"medium",LARGE:"large"},isDOMElement:function(e){return"object"==typeof e&&"nodeType"in e&&1===e.nodeType},isInteger:function(e){return"number"==typeof e&&0===e%1},elOrSelector:function(e,t){if(!this.isDOMElement(e)){var r=n.select(e);if(0===r.length)throw new TypeError(t+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself.");return r[0]}return e},clone:function(e){try{if("object"!=typeof e)throw new Error("Given argument is not an object!");return JSON.parse(JSON.stringify(e))}catch(t){throw new Error("Given object cannot have loops!")}},childIndex:function(e){if(a.isDOMElement(e))for(var t=n.select("> *",e.parentNode),r=0,i=t.length;i>r;++r)if(t[r]===e)return r;throw"not found!"},ajaxJSON:function(t,n,r){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(e){try{if(e=e.responseJSON,"ok"!==e.status)throw"server error: "+e.message;r(null,e)}catch(t){r(t)}},onFailure:function(){r("communication failure")}})},currentLayout:function(){var e,r,i,o,a,s=n.select("#ink-layout-detector")[0];if(!s){s=document.createElement("div"),s.id="ink-layout-detector";for(i in this.Layouts)this.Layouts.hasOwnProperty(i)&&(o=this.Layouts[i],a=document.createElement("div"),a.className="show-"+o+" hide-all",a.setAttribute("data-ink-layout",o),s.appendChild(a));document.body.appendChild(s)}for(e=0,r=s.childNodes.length;r>e;++e)if(a=s.childNodes[e],"hidden"!==t.getStyle(a,"visibility"))return a.getAttribute("data-ink-layout")},hashSet:function(e){if("object"!=typeof e)throw new TypeError("o should be an object!");var t=r.getAnchorString();t=Ink.extendObj(t,e),window.location.hash=r.genQueryString("",t).substring(1)},cleanChildren:function(e){if(!a.isDOMElement(e))throw"Please provide a valid DOMElement";for(var t,n=e.lastChild;n;)t=n.previousSibling,e.removeChild(n),n=t},storeIdAndClasses:function(e,t){if(!a.isDOMElement(e))throw"Please provide a valid DOMElement as first parameter";var n=e.id;n&&(t._id=n);var r=e.className;r&&(t._classes=r)},restoreIdAndClasses:function(e,t){if(!a.isDOMElement(e))throw"Please provide a valid DOMElement as first parameter";t._id&&e.id!==t._id&&(e.id=t._id),t._classes&&-1===e.className.indexOf(t._classes)&&(e.className?e.className+=" "+t._classes:e.className=t._classes),t._instanceId&&!e.getAttribute("data-instance")&&e.setAttribute("data-instance",t._instanceId)},registerInstance:function(e,t,n){if(!e._instanceId){if("object"!=typeof e)throw new TypeError("1st argument must be a JavaScript object!");if(!e._options||!e._options.skipRegister){if(!this.isDOMElement(t))throw new TypeError("2nd argument must be a DOM element!");if(void 0!==n&&"string"!=typeof n)throw new TypeError("3rd argument must be a string!");var r=(n||"instance")+ ++o;i[r]=e,e._instanceId=r;var a=t.getAttribute("data-instance");a=null!==a?[a,r].join(" "):r,t.setAttribute("data-instance",a)}}},unregisterInstance:function(e){delete i[e]},getInstance:function(e){var t;if(this.isDOMElement(e)){if(t=e.getAttribute("data-instance"),null===t)throw new Error("argument is not a DOM instance element!")}else t=e;t=t.split(" ");var n,r,o,a=t.length,s=[];for(o=0;a>o;++o){if(r=t[o],!r)throw new Error("Element is not a JS instance!");if(n=i[r],!n)throw new Error('Instance "'+r+'" not found!');s.push(n)}return 1===a?s[0]:s},getInstanceFromSelector:function(e){var t=n.select(e)[0];if(!t)throw new Error("Element not found!");return this.getInstance(t)},getInstanceIds:function(){var e=[];for(var t in i)i.hasOwnProperty(t)&&e.push(t);return e},getInstances:function(){var e=[];for(var t in i)i.hasOwnProperty(t)&&e.push(i[t]);return e},destroyComponent:function(){Ink.Util.Aux.unregisterInstance(this._instanceId),this._element.parentNode.removeChild(this._element)}};return a});
Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(e,t){"use strict";var n=function(){e.observe(document.body,"click",function(n){var r=e.element(n);if(r=t.findUpwardsByClass(r,"ink-close")||t.findUpwardsByClass(r,"ink-dismiss")){var i=r;i=t.findUpwardsByClass(r,"ink-alert")||t.findUpwardsByClass(r,"ink-alert-block"),i&&(e.stop(n),t.remove(i))}})};return n});
Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,o){"use strict";var a=function(t,n){if(!e.isDOMElement(t)&&"string"!=typeof t)throw"[Ink.UI.TreeView] :: Invalid selector";if("string"==typeof t){if(this._element=i.select(t),this._element.length<1)throw"[Ink.UI.TreeView] :: Selector has returned no elements";this._element=this._element[0]}else this._element=t;this._options=Ink.extendObj({node:"li",child:"ul"},r.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._init()};return a.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},t.observe(this._element,"click",this._handlers.click);var e,r=i.select(this._options.node,this._element);o.each(r,Ink.bind(function(t){n.hasClassName(t,"open")||(n.hasClassName(t,"closed")||n.addClassName(t,"closed"),e=i.select(this._options.child,t),o.each(e,Ink.bind(function(e){n.hasClassName(e,"hide-all")||n.addClassName(e,"hide-all")},this)))},this))},_onClick:function(e){var r=t.element(e);if("."===this._options.node[0]){if(!n.hasClassName(r,this._options.node.substr(1)))for(;!n.hasClassName(r,this._options.node.substr(1))&&"body"!==r.nodeName.toLowerCase();)r=r.parentNode}else if("#"===this._options.node[0]){if(r.id!==this._options.node.substr(1))for(;r.id!==this._options.node.substr(1)&&"body"!==r.nodeName.toLowerCase();)r=r.parentNode}else if(r.nodeName.toLowerCase()!==this._options.node)for(;r.nodeName.toLowerCase()!==this._options.node&&"body"!==r.nodeName.toLowerCase();)r=r.parentNode;if("body"!==r.nodeName.toLowerCase()){var o=i.select(this._options.child,r);o.length>0&&(t.stop(e),o=o[0],n.hasClassName(o,"hide-all")?(n.removeClassName(o,"hide-all"),n.addClassName(r,"open"),n.removeClassName(r,"closed")):(n.addClassName(o,"hide-all"),n.removeClassName(r,"open"),n.addClassName(r,"closed")))}}},a});
Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Dom.Browser_1"],function(e,t,n,i,r,o,a){"use strict";var s=function(t,n){t&&(this._dataField=e.elOrSelector(t,"1st argument")),this._options=Ink.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"sapo_component_datepicker",position:"right",onFocus:!0,onYearSelected:void 0,onMonthSelected:void 0,validDayFn:void 0,startDate:!1,onSetDate:!1,displayInSelect:!1,showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Close",cleanText:"Clear",prevLinkText:"",nextLinkText:"",ofText:"&nbsp;de&nbsp;",month:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},wDay:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}},i.data(this._dataField)||{}),this._options=Ink.extendObj(this._options,n||{}),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=null,this._options.pickerField&&(this._picker=e.elOrSelector(this._options.pickerField,"pickerField")),this._today=new Date,this._day=this._today.getDate(),this._month=this._today.getMonth(),this._year=this._today.getFullYear(),this._setMinMax(this._options.dateRange||this._options.yearRange),this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year,this._month,this._day))),this._options.startDate&&"string"==typeof this._options.startDate&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate)&&this.setDate(this._options.startDate),this._init(),this._render(),this._options.startDate||this._dataField&&"string"==typeof this._dataField.value&&this._dataField.value&&this.setDate(this._dataField.value),e.registerInstance(this,this._containerObject,"datePicker")};return s.prototype={version:"0.1",_init:function(){Ink.extendObj(this._options,this._lang||{})},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.id=this._options.instance,this._containerObject.className="sapo_component_datepicker";var n=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){if(this._superTopBar=document.createElement("div"),this._superTopBar.className="sapo_cal_top_options",this._options.showClean){var r=document.createElement("a");r.className="clean",r.innerHTML=this._options.cleanText,this._superTopBar.appendChild(r)}if(this._options.showClose){var o=document.createElement("a");o.className="close",o.innerHTML=this._options.closeText,this._superTopBar.appendChild(o)}this._containerObject.appendChild(this._superTopBar)}var a=document.createElement("div");a.className="sapo_cal_top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="sapo_cal_month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="sapo_cal_prev",this._monthPrev.innerHTML='<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>",this._monthNext=document.createElement("div"),this._monthNext.className="sapo_cal_next",this._monthNext.innerHTML='<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>",a.appendChild(this._monthPrev),a.appendChild(this._monthDescContainer),a.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="sapo_cal_month",this._containerObject.appendChild(a),this._containerObject.appendChild(this._monthContainer),this._monthSelector=document.createElement("ul"),this._monthSelector.className="sapo_cal_month_selector";for(var s,l,c=1;12>=c;c++)0===(c-1)%4&&(s=document.createElement("ul")),l=document.createElement("li"),l.innerHTML='<a href="#" class="sapo_calmonth_'+(2===String(c).length?c:"0"+c)+'">'+this._options.month[c].substring(0,3)+"</a>",s.appendChild(l),0===c%4&&this._monthSelector.appendChild(s);if(this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="sapo_cal_year_selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._options.pickerField?this._picker=e.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=i.elementTop(this._dataField),this._picker.style.left=i.elementLeft(this._dataField)+(i.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker")),this._options.displayInSelect){if(!(this._options.dayField&&this._options.monthField&&this._options.yearField||this._options.pickerField))throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";this._options.dayField=e.elOrSelector(this._options.dayField,"dayField"),this._options.monthField=e.elOrSelector(this._options.monthField,"monthField"),this._options.yearField=e.elOrSelector(this._options.yearField,"yearField")}n.insertBefore(this._containerObject,n.childNodes[0]),this._picker?t.observe(this._picker,"click",Ink.bindEvent(function(e){t.stop(e),this._containerObject=i.clonePosition(this._containerObject,this._picker),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)):t.observe(this._dataField,"focus",Ink.bindEvent(function(){this._containerObject=i.clonePosition(this._containerObject,this._dataField),"bottom"===this._options.position?(this._containerObject.style.top=i.elementHeight(this._dataField)+i.offsetTop(this._dataField)+"px",this._containerObject.style.left=i.offset(this._dataField)[0]+"px"):(this._containerObject.style.top=i.offset(this._dataField)[1]+"px",this._containerObject.style.left=i.elementWidth(this._dataField)+i.offset(this._dataField)[0]+"px"),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)),this._options.displayInSelect?(t.observe(this._options.dayField,"change",Ink.bindEvent(function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;""!==e&&0!==e&&(this._updateDate(),this._showDefaultView())},this)),t.observe(this._options.monthField,"change",Ink.bindEvent(function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;""!==e&&0!==e&&(this._updateDate(),this._showDefaultView())},this)),t.observe(this._options.yearField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView()},this))):(t.observe(this._dataField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._hoverPicker||(this._containerObject.style.display="none")},this)),t.observe(this._dataField,"blur",Ink.bindEvent(function(){this._hoverPicker||(this._containerObject.style.display="none")},this))),t.observe(document,"click",Ink.bindEvent(function(e){void 0===e.target&&(e.target=e.srcElement),i.descendantOf(this._containerObject,e.target)||e.target===this._dataField||(this._picker?e.target===this._picker||this._options.displayInSelect&&(e.target===this._options.dayField||e.target===this._options.monthField||e.target===this._options.yearField)||this._options.dayField&&(i.descendantOf(this._options.dayField,e.target)||i.descendantOf(this._options.monthField,e.target)||i.descendantOf(this._options.yearField,e.target))||(this._containerObject.style.display="none"):this._containerObject.style.display="none")},this)),this._showMonth(),this._monthChanger=document.createElement("a"),this._monthChanger.href="#monthchanger",this._monthChanger.className="sapo_cal_link_month",this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText=document.createElement("span"),this._deText.innerHTML=this._options._deText,this._yearChanger=document.createElement("a"),this._yearChanger.href="#yearchanger",this._yearChanger.className="sapo_cal_link_year",this._yearChanger.innerHTML=this._year,this._monthDescContainer.innerHTML="",this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._deText),this._monthDescContainer.appendChild(this._yearChanger),t.observe(this._containerObject,"mouseover",Ink.bindEvent(function(e){t.stop(e),this._hoverPicker=!0},this)),t.observe(this._containerObject,"mouseout",Ink.bindEvent(function(e){t.stop(e),this._hoverPicker=!1},this)),t.observe(this._containerObject,"click",Ink.bindEvent(function(e){"undefined"==typeof e.target&&(e.target=e.srcElement);var n=e.target.className,i=-1!==n.indexOf("sapo_cal_off");if(t.stop(e),0!==n.indexOf("sapo_cal_")||i)if(0!==n.indexOf("sapo_calmonth_")||i)if(0!==n.indexOf("sapo_calyear_")||i)0!==n.indexOf("change_month_")||i?0!==n.indexOf("change_year_")||i?"clean"===n?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value="":"close"===n&&(this._containerObject.style.display="none"):"change_year_next"===n?this._showYearSelector(1):"change_year_prev"===n&&this._showYearSelector(-1):"change_month_next"===n?this._updateCal(1):"change_month_prev"===n&&this._updateCal(-1);else{var r=n.substr(13,4);Number(r)&&(this._year=r,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._yearSelector.style.display="none",this._setActiveMonth(),this._monthSelector.style.display="block")}else{var o=n.substr(14,2);Number(o)&&(this._month=o-1,this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year===this._yearMin&&this._month<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._updateCal(),this._monthContainer.style.display="block")}else{var a=n.substr(9,2);Number(a)?(this.setDate(this._year+"-"+(this._month+1)+"-"+a),this._containerObject.style.display="none"):"sapo_cal_link_month"===n?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):"sapo_cal_link_year"===n&&(this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._showYearSelector(),this._yearSelector.style.display="block")}this._updateDescription()},this))},_setMinMax:function(e){var t;if(e){var n=e.split(":"),i=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;if(n[0]&&("NOW"===n[0]?(this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate()):i.test(n[0])?(t=n[0].split("-"),this._yearMin=Math.floor(t[0]),this._monthMin=Math.floor(t[1])||1,this._dayMin=Math.floor(t[2])||1,1<this._monthMin&&this._monthMin>12&&(this._monthMin=1,this._dayMin=1),1<this._dayMin&&this._dayMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)):(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1)),n[1])if("NOW"===n[1])this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate();else if(i.test(n[1])){t=n[1].split("-"),this._yearMax=Math.floor(t[0]),this._monthMax=Math.floor(t[1])||12,this._dayMax=Math.floor(t[2])||this._daysInMonth(this._yearMax,this._monthMax),1<this._monthMax&&this._monthMax>12&&(this._monthMax=12,this._dayMax=31);var r=this._daysInMonth(this._yearMax,this._monthMax);1<this._dayMax&&this._dayMax>r&&(this._dayMax=r)}else this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31;this._yearMax>=this._yearMin&&(this._monthMax>this._monthMin||this._monthMax===this._monthMin&&this._dayMax>=this._dayMin)||(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31},_checkDateRange:function(e,t,n){return this._isValidDate(e,t+1,n)||(e=this._today.getFullYear(),t=this._today.getMonth(),n=this._today.getDate()),e>this._yearMax?(e=this._yearMax,t=this._monthMax-1,n=this._dayMax):e<this._yearMin&&(e=this._yearMin,t=this._monthMin-1,n=this._dayMin),e===this._yearMax&&t+1>this._monthMax?(t=this._monthMax-1,n=this._dayMax):e===this._yearMin&&t+1<this._monthMin&&(t=this._monthMin-1,n=this._dayMin),e===this._yearMax&&t+1===this._monthMax&&n>this._dayMax?n=this._dayMax:e===this._yearMin&&t+1===this._monthMin&&n<this._dayMin?n=this._dayMin:n>this._daysInMonth(e,t+1)&&(n=this._daysInMonth(e,t+1)),[e,t,n]},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year===this._yearMin&&this._month+1<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month+1>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var e;this._options.displayInSelect?(e=[],this._isValidDate(e[0]=this._options.yearField[this._options.yearField.selectedIndex].value,e[1]=this._options.monthField[this._options.monthField.selectedIndex].value,e[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(e=this._checkDateRange(e[0],e[1]-1,1),this._isValidDate(e[0],e[1]+1,e[2])&&(this._year=e[0],this._month=e[1],this._day=this._daysInMonth(e[0],e[1]),this.setDate()))):""!==this._dataField.value&&(this._isDate(this._options.format,this._dataField.value)?(e=this._getDataArrayParsed(this._dataField.value),e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat()),this._updateDescription(),this._showMonth()},_updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText.innerHTML=this._options.ofText,this._yearChanger.innerHTML=this._year},_showYearSelector:function(){if(arguments.length){var e=+this._year+10*arguments[0];if(e-=e%10,e>this._yearMax||e+9<this._yearMin)return;this._year=+this._year+10*arguments[0]}for(var t="<li>",n=this._year-this._year%10,i=0;11>=i;i++)0===i%4&&(t+="<ul>"),t+=i&&11!==i?n+i-1<=this._yearMax&&n+i-1>=this._yearMin?'<li><a href="#" class="sapo_calyear_'+(n+i-1)+(n+i-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(n+i-1)+"</a></li>":'<li><a href="#" class="sapo_cal_off">'+(n+i-1)+"</a></li>":i&&n+i-1<=this._yearMax&&n+i-1>=this._yearMin?'<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>":n+i-1<=this._yearMax&&n+i-1>=this._yearMin?'<li><a href="#year_prev" class="change_year_prev">'+this._options.prevLinkText+"</a></li>":"<li>&nbsp;</li>",0===(i+1)%4&&(t+="</ul>");t+="</li>",this._yearSelector.innerHTML=t},_getDataArrayParsed:function(e){var t=[],n=a.set(this._options.format,e);return n&&(t=[n.getFullYear(),n.getMonth()+1,n.getDate()]),t},_isValidDate:function(e,t,n){var i=/^\d{4}$/,r=/^\d{1,2}$/;return i.test(e)&&r.test(t)&&r.test(n)&&t>=1&&12>=t&&n>=1&&n<=this._daysInMonth(e,t)},_isDate:function(e,t){try{if("undefined"==typeof e)return!1;var n=a.set(e,t);if(n&&this._isValidDate(n.getFullYear(),n.getMonth()+1,n.getDate()))return!0}catch(i){}return!1},_writeDateInFormat:function(){return a.get(this._options.format,this._data)},setDate:function(e){if("string"==typeof e&&/\d{4}-\d{1,2}-\d{1,2}/.test(e)){var t=e.split("-");this._year=t[0],this._month=t[1]-1,this._day=t[2]}this._setDate()},_setDate:function(e){"undefined"!=typeof e&&e.className&&0===e.className.indexOf("sapo_cal_")&&(this._day=e.className.substr(9,2)),this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day)),this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat(),this._options.onSetDate&&this._options.onSetDate(this,{date:this._data})},_updateCal:function(e){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),this._updateMonth(e),this._showMonth()},_daysInMonth:function(e,t){var n=31;switch(t){case 2:n=0===e%400||0===e%4&&0!==e%100?29:28;break;case 4:case 6:case 9:case 11:n=30}return n},_updateMonth:function(e){"undefined"==typeof e&&(e="0");var t=this._month+1,n=this._year;switch(e){case-1:if(1===t){if(n===this._yearMin)return;t=12,n--}else t--;this._year=n,this._month=t-1;break;case 1:if(12===t){if(n===this._yearMax)return;t=1,n++}else t++;this._year=n,this._month=t-1}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var e,t,n=this._month+1,i=this._year,r=this._daysInMonth(i,n),o=new Date(i,n-1,1).getDay(),a=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",i<this._yearMin||i===this._yearMin&&n<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(i>this._yearMax||i===this._yearMax&&n>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),a&&Number(a)&&(a>o?o=7+a-o:o+=a);var s="";for(s+='<ul class="sapo_cal_header">',e=0;7>e;e++)s+="<li>"+this._options.wDay[e+(a+e>6?a-7:a)].substring(0,1)+"</li>";s+="</ul>";var l=0;if(s+="<ul>",o)for(t=a;o-a>t;t++)l||(s+="<ul>"),s+='<li class="sapo_cal_empty">&nbsp;</li>',l++;for(e=1;r>=e;e++){7===l&&(l=0,s+="<ul>");var c="sapo_cal_"+(2===String(e).length?e:"0"+e);c+=i===this._yearMin&&n===this._monthMin&&e<this._dayMin||i===this._yearMax&&n===this._monthMax&&e>this._dayMax||i===this._yearMin&&n<this._monthMin||i===this._yearMax&&n>this._monthMax||i<this._yearMin||i>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(i,n-1,e))?" sapo_cal_off":this._data.getFullYear()===i&&this._data.getMonth()===n-1&&e===this._day?" sapo_cal_on":"",s+='<li><a href="#" class="'+c+'">'+e+"</a></li>",l++,7===l&&(s+="</ul>")}if(7!==l){for(e=l;7>e;e++)s+='<li class="sapo_cal_empty">&nbsp;</li>';s+="</ul>"}s+="</ul>",this._monthContainer.innerHTML=s},_setActiveMonth:function(e){"undefined"==typeof e&&(e=this._monthSelector);var t=e.childNodes.length;if(e.className&&e.className.match(/sapo_calmonth_/)){var i=this._year,r=e.className.substr(14,2);i===this._data.getFullYear()&&r===this._data.getMonth()+1?(n.addClassName(e,"sapo_cal_on"),n.removeClassName(e,"sapo_cal_off")):(n.removeClassName(e,"sapo_cal_on"),i===this._yearMin&&r<this._monthMin||i===this._yearMax&&r>this._monthMax||i<this._yearMin||i>this._yearMax?n.addClassName(e,"sapo_cal_off"):n.removeClassName(e,"sapo_cal_off"))}else if(0!==t)for(var o=0;t>o;o++)this._setActiveMonth(e.childNodes[o])},lang:function(e){this._lang=e},showMonth:function(){this._showMonth()},isMonthRendered:function(){var e=r.select(".sapo_cal_header",this._containerObject)[0];return"none"!==n.getStyle(e.parentNode,"display")&&"none"!==n.getStyle(e.parentNode.parentNode,"display")}},s});
Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(e,t,n,i,r,o){function s(e,t,n){return e=Math.min(e,n),e=Math.max(e,t)}var a=0,l=1,h=function(e,t){this.init(e,t)};return h.prototype={init:function(n,r){var s=Ink.extendObj({constraint:!1,constraintElm:!1,top:!1,right:!1,bottom:!1,left:!1,handle:r.handler||!1,revert:!1,cursor:"move",zindex:r.zindex||9999,dragClass:"drag",onStart:!1,onEnd:!1,onDrag:!1,onChange:!1,droppableProxy:!1,mouseAnchor:void 0,skipChildren:!0,fps:100,debug:!1},r||{},e.data(n));this.options=s,this.element=o.elOrSelector(n),this.constraintElm=s.constraintElm&&o.elOrSelector(s.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,s.fps&&(this.deltaMs=1e3/s.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(e){return t.stop(e),!1},this.handle=this.options.handle?o.elOrSelector(this.options.handle):this.element,this.handle.style.cursor=s.cursor,t.observe(this.handle,"touchstart",this.handlers.start),t.observe(this.handle,"mousedown",this.handlers.start),i.IE&&t.observe(this.element,"selectstart",this.handlers.selectStart)},destroy:function(){t.stopObserving(this.handle,"touchstart",this.handlers.start),t.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&t.stopObserving(this.element,"selectstart",this.handlers.selectStart)},_getCoords:function(t){var n=[e.scrollWidth(),e.scrollHeight()];return{x:(t.touches?t.touches[0].clientX:t.clientX)+n[a],y:(t.touches?t.touches[0].clientY:t.clientY)+n[l]}},_cloneStyle:function(t,i){i.className=t.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=e.elementWidth(t)+"px",i.style.height=e.elementHeight(t)+"px",i.style.left=e.elementLeft(t)+"px",i.style.top=e.elementTop(t)+"px",i.style.cssFloat=n.getStyle(t,"float"),i.style.display=n.getStyle(t,"display")},_onStart:function(i){if(!this.active&&t.isLeftClick(i)||"undefined"==typeof i.button){var r=t.element(i);if(this.options.skipChildren&&r!==this.handle)return;t.stop(i),n.addClassName(this.element,this.options.dragClass),this.elmStartPosition=[e.elementLeft(this.element),e.elementTop(this.element)];var o=[parseInt(n.getStyle(this.element,"left"),10),parseInt(n.getStyle(this.element,"top"),10)],s=e.elementDimensions(this.element);this.originalPosition=[o[a]?o[a]:null,o[l]?o[l]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this.element,"position"),this.zindex=n.getStyle(this.element,"zIndex");var h=document.createElement("div");if(h.style.position=this.position,h.style.width=s[a]+"px",h.style.height=s[l]+"px",h.style.marginTop=n.getStyle(this.element,"margin-top"),h.style.marginBottom=n.getStyle(this.element,"margin-bottom"),h.style.marginLeft=n.getStyle(this.element,"margin-left"),h.style.marginRight=n.getStyle(this.element,"margin-right"),h.style.borderWidth="0",h.style.padding="0",h.style.cssFloat=n.getStyle(this.element,"float"),h.style.display=n.getStyle(this.element,"display"),h.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[a],this.delta.y-this.elmStartPosition[l]],this.options.mouseAnchor){var c=this.options.mouseAnchor.split(" "),d=[s[a],s[l]];"left"===c[0]?d[a]=0:"center"===c[0]&&(d[a]=parseInt(d[a]/2,10)),"top"===c[1]?d[l]=0:"center"===c[1]&&(d[l]=parseInt(d[l]/2,10)),this.applyDelta=[this.delta2[a]-d[a],this.delta2[l]-d[l]]}var u=this.options.fps?"dragFacade":"drag";if(this.placeholder=h,this.options.onStart&&this.options.onStart(this.element,i),this.options.droppableProxy){this.proxy=document.createElement("div"),s=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var f=this.proxy.style;f.width=s[a]+"px",f.height=s[l]+"px",f.position="fixed",f.left="0",f.top="0",f.zIndex=this.options.zindex+1,f.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var p=document.body.firstChild;p&&1!==p.nodeType;)p=p.nextSibling;document.body.insertBefore(this.proxy,p),t.observe(this.proxy,"mousemove",this.handlers[u]),t.observe(this.proxy,"touchmove",this.handlers[u])}else t.observe(document,"mousemove",this.handlers[u]);return this.element.style.position="absolute",this.element.style.zIndex=this.options.zindex,this.element.parentNode.insertBefore(this.placeholder,this.element),this._onDrag(i),t.observe(document,"mouseup",this.handlers.end),t.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(e){var t=+new Date;(!this.lastRunAt||t>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=t,this._onDrag(e))},_onDrag:function(n){if(this.active){t.stop(n),this.dragged=!0;var i=this._getCoords(n),r=i.x,o=i.y,h=this.options,c=!1,d=!1;if(this.prevCoords&&r!==this.prevCoords.x||o!==this.prevCoords.y){h.onDrag&&h.onDrag(this.element,n),this.prevCoords=i,c=this.elmStartPosition[a]+r-this.delta.x,d=this.elmStartPosition[l]+o-this.delta.y;var u=e.elementDimensions(this.element);if(this.constraintElm){var f=e.offset(this.constraintElm),p=e.elementDimensions(this.constraintElm),m=f[l]+(h.top||0),g=f[l]+p[l]-(h.bottom||0),y=f[a]+(h.left||0),_=f[a]+p[a]-(h.right||0);d=s(d,m,g-u[l]),c=s(c,y,_-u[a])}else if(h.constraint){var v=h.right===!1?e.pageWidth()-u[a]:h.right,b=h.left===!1?0:h.left,w=h.top===!1?0:h.top,x=h.bottom===!1?e.pageHeight()-u[l]:h.bottom;("horizontal"===h.constraint||"both"===h.constraint)&&(c=s(c,b,v)),("vertical"===h.constraint||"both"===h.constraint)&&(d=s(d,w,x))}var k=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(k&&k.updateAll(),this.firstDrag=!1),c&&(this.element.style.left=c+"px"),d&&(this.element.style.top=d+"px"),k){var C=this.options.mouseAnchor?{x:r-this.applyDelta[a],y:o-this.applyDelta[l]}:i;k.action(C,"drag",n,this.element)}h.onChange&&h.onChange(this)}}},_onEnd:function(i){if(t.stopObserving(document,"mousemove",this.handlers.drag),t.stopObserving(document,"touchmove",this.handlers.drag),this.options.fps&&this._onDrag(i),n.removeClassName(this.element,this.options.dragClass),this.active&&this.dragged){this.options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(e.remove(this.pt),this.pt=void 0),this.placeholder&&e.remove(this.placeholder),this.options.revert&&(this.element.style.position=this.position,this.element.style.zIndex=null!==this.zindex?this.zindex:"auto",this.element.style.left=this.originalPosition[a]?this.originalPosition[a]+"px":"",this.element.style.top=this.originalPosition[l]?this.originalPosition[l]+"px":""),this.options.onEnd&&this.options.onEnd(this.element,i);var r=Ink.getModule("Ink.UI.Droppable_1");r&&r.action(this._getCoords(i),"drop",i,this.element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},h});
Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Common_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(e,t,n,i,r,o){var s=function(e){return function(t){return n.addClassName(e,t)}},a=function(e){return function(t){return n.removeClassName(e,t)}},l={debug:!1,_droppables:[],_draggables:[],add:function(t,n){function r(e){e.style.position="inherit"}t=i.elOrSelector(t,"Droppable.add target element");var o=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},e.data(t));"string"==typeof o.hoverClass&&(o.hoverClass=o.hoverClass.split(/\s+/));var s,a=this,l={move:function(e,t){r(e),t.appendChild(e)},copy:function(e,t){r(e),t.appendChild(e.cloneNode)},revert:function(e){a._findDraggable(e).originalParent.appendChild(e),r(e)}};if("string"==typeof o.onHover&&(s=o.onHover,o.onHover=l[s],void 0===o.onHover))throw new Error("Unknown hover event handler: "+s);if("string"==typeof o.onDrop&&(s=o.onDrop,o.onDrop=l[s],void 0===o.onDrop))throw new Error("Unknown drop event handler: "+s);if("string"==typeof o.onDropOut&&(s=o.onDropOut,o.onDropOut=l[s],void 0===o.onDropOut))throw new Error("Unknown dropOut event handler: "+s);var h={element:t,data:{},options:o};this._droppables.push(h),this._update(h)},_findData:function(e){for(var t=this._droppables,n=0,i=t.length;i>n;n++)if(t[n].element===e)return t[n]},_findDraggable:function(e){for(var t=this._draggables,n=0,i=t.length;i>n;n++)if(t[n].element===e)return t[n]},updateAll:function(){r.each(this._droppables,l._update)},update:function(e){this._update(this._findData(e))},_update:function(t){var n=t.data,i=t.element;n.left=e.offsetLeft(i),n.top=e.offsetTop(i),n.right=n.left+e.elementWidth(i),n.bottom=n.top+e.elementHeight(i)},remove:function(e){e=i.elOrSelector(e);for(var t=this._droppables.length,n=0;t>n;n++)if(this._droppables[n].element===e){this._droppables.splice(n,1);break}return t!==this._droppables.length},action:function(e,t,n,i){r.each(this._droppables,Ink.bind(function(l){var h=l.data,c=l.options,d=l.element;(!c.accept||o.matches(c.accept,[i]).length)&&("drag"!==t||this._findDraggable(i)||this._draggables.push({element:i,originalParent:i.parentNode}),e.x>=h.left&&e.x<=h.right&&e.y>=h.top&&e.y<=h.bottom?"drag"===t?(c.hoverClass&&r.each(c.hoverClass,s(d)),c.onHover&&c.onHover(i,d)):"drop"===t&&(c.hoverClass&&r.each(c.hoverClass,a(d)),c.onDrop&&c.onDrop(i,d,n)):"drag"===t&&c.hoverClass?r.each(c.hoverClass,a(d)):"drop"===t&&c.onDropOut&&c.onDropOut(i,d,n))},this))}};return l});
Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Css_1","Ink.Util.Validator_1"],function(e,t){"use strict";var n={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(e,t){if(this._free(),t=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},t||{}),"string"==typeof e&&(e=document.getElementById(e)),null===e)return!1;this.element=e,("undefined"==typeof this.element.id||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=t.customFlag,this.confirmGroup=t.confirmGroup;var n=this._validateElements();return n.length>0?(t.onError?t.onError(n):this._showError(e,n),!1):(t.onError||this._clearError(e),this._clearCache(),t.onSuccess&&t.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){this.elements[this.element.id]=[],this.confirmElms[this.element.id]=[];for(var t=this.element.elements,n=!1,i=0,r=t.length;r>i;i++)if(n=t[i],null!==n.getAttribute("type")&&"radio"===n.getAttribute("type").toLowerCase()){if(0===this.elements[this.element.id].length||n.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("type")&&n.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("name"))for(var o in this._flagMap)if(e.hasClassName(n,o)){this.elements[this.element.id].push(n);break}}else{for(var s in this._flagMap)if(e.hasClassName(n,s)&&"ink-fv-confirm"!==s){this.elements[this.element.id].push(n);break}e.hasClassName(n,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(n),this.hasConfirm[this.element.id]=!0)}},_validateElements:function(){var t;this._getElements(),"undefined"!=typeof this.hasConfirm[this.element.id]&&this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],r=!1,o=!1,s=0,a=this.elements[this.element.id].length;a>s;s++)if(n=!1,r=this.elements[this.element.id][s],!r.disabled)for(var l in this._flagMap)e.hasClassName(r,l)&&("ink-fv-custom"!==l&&"ink-fv-confirm"!==l?this._isValid(r,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:r,errors:[l]}),n=!0)):"ink-fv-confirm"!==l&&(o=this._isCustomValid(r),o.length>0&&i.push({elm:r,errors:[l],custom:o})));return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(e,t){var n=!1;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],2===n.length&&n[0].value!==n[1].value&&t.push({elm:n[1],errors:["ink-fv-confirm"]}));return t},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,r=0,o=this.confirmElms[this.element.id].length;o>r;r++){n=this.confirmElms[this.element.id][r];for(var s=0,a=this.confirmGroup.length;a>s;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&("undefined"==typeof t[i]?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,r=0,o=this.custom.length;o>r;r++)i=this.custom[r],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(n,i){switch(i){case"ink-fv-required":if("select"===n.nodeName.toLowerCase())return n.selectedIndex>0?!0:!1;if("checkbox"!==n.getAttribute("type")&&"radio"!==n.getAttribute("type")){if(""!==this._trim(n.value))return!0}else if("checkbox"===n.getAttribute("type")){if(n.checked===!0)return!0}else if("radio"===n.getAttribute("type")){var r=n.form[n.name];"undefined"==typeof r.length&&(r=[r]);for(var o=!1,s=0,a=r.length;a>s;s++)r[s].checked===!0&&(o=!0);return o}break;case"ink-fv-email":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.mail(n.value))return!0;break;case"ink-fv-url":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.url(n.value))return!0;break;case"ink-fv-number":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(!isNaN(Number(n.value)))return!0;break;case"ink-fv-phone_pt":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isPTPhone(n.value))return!0;break;case"ink-fv-phone_cv":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isCVPhone(n.value))return!0;break;case"ink-fv-phone_ao":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isAOPhone(n.value))return!0;break;case"ink-fv-phone_mz":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isMZPhone(n.value))return!0;break;case"ink-fv-date":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;var l=Ink.getModule("Ink.Dom.Element",1),h=l.data(n),c="yyyy-mm-dd";if(e.hasClassName(n,"ink-datepicker")&&"format"in h?c=h.format:"validFormat"in h&&(c=h.validFormat),!(c in t._dateParsers)){var d=[];for(var u in t._dateParsers)t._dateParsers.hasOwnProperty(u)&&d.push(u);throw"The attribute data-valid-format must be one of the following values: "+d.join(",")}return t.isDate(c,n.value);case"ink-fv-custom":}return!1},_showError:function(t,n){this._clearError(t);for(var i=!1,r=0,o=n.length;o>r;r++)if(i=n[r].elm,"radio"!==i.getAttribute("type")){var s=document.createElement("p");e.addClassName(s,this._errorClassName),e.addClassName(s,this._errorTypeErrorClassName),s.innerHTML="ink-fv-custom"!==n[r].errors[0]?this._flagMap[n[r].errors[0]].msg:n[r].custom[0].msg,"checkbox"!==i.getAttribute("type")&&(i.nextSibling.parentNode.insertBefore(s,i.nextSibling),e.hasClassName(i.parentNode,"control")&&(e.addClassName(i.parentNode.parentNode,"validation"),"ink-fv-required"===n[r].errors[0]?e.addClassName(i.parentNode.parentNode,"error"):e.addClassName(i.parentNode.parentNode,"warning")))}else e.hasClassName(i.parentNode.parentNode,"control-group")&&(e.addClassName(i.parentNode.parentNode,"validation"),e.addClassName(i.parentNode.parentNode,"error"))},_clearError:function(t){for(var n=t.getElementsByTagName("p"),i=!1,r=n.length-1;r>=0;r--)i=n[r],e.hasClassName(i,this._errorClassName)&&(e.hasClassName(i.parentNode,"control")&&(e.removeClassName(i.parentNode.parentNode,"validation"),e.removeClassName(i.parentNode.parentNode,"error"),e.removeClassName(i.parentNode.parentNode,"warning")),e.hasClassName(i,"tip")&&e.hasClassName(i,"error")&&i.parentNode.removeChild(i));var o=t.getElementsByTagName("ul");for(r=o.length-1;r>=0;r--)i=o[r],e.hasClassName(i,"control-group")&&(e.removeClassName(i,"validation"),e.removeClassName(i,"error"))},_trim:function(e){return"string"==typeof e?e.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return n});
Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Common_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(e,t,n,i,r,o,a,s){"use strict";var l={required:function(e){return"undefined"!=typeof e&&!/^\s*$/.test(e)},min_length:function(e,t){return"string"==typeof e&&e.length>=parseInt(t,10)},max_length:function(e,t){return"string"==typeof e&&e.length<=parseInt(t,10)},exact_length:function(e,t){return"string"==typeof e&&e.length===parseInt(t,10)},email:function(e){return"string"==typeof e&&s.mail(e)},url:function(e,t){return t=t||!1,"string"==typeof e&&s.url(e,t)},ip:function(e,t){return"string"!=typeof e?!1:s.isIP(e,t)},phone:function(e,t){if("string"!=typeof e)return!1;var n=t?t.toUpperCase():"";return s["is"+n+"Phone"](e)},credit_card:function(e,t){return"string"!=typeof e?!1:s.isCreditCard(e,t||"default")},date:function(e,t){return"string"==typeof e&&s.isDate(t,e)},alpha:function(e,t){return s.ascii(e,{singleLineWhitespace:t})},text:function(e,t,n){return s.unicode(e,{singleLineWhitespace:t,unicodePunctuation:n})},latin:function(e,t,n){return"string"!=typeof e?!1:s.latin1(e,{latin1Punctuation:t,singleLineWhitespace:n})},alpha_numeric:function(e){return s.ascii(e,{numbers:!0})},alpha_dash:function(e){return s.ascii(e,{dash:!0,underscore:!0})},digit:function(e){return"string"==typeof e&&/^[0-9]{1}$/.test(e)},integer:function(e,t){return s.number(e,{negative:!t,decimalPlaces:0})},decimal:function(e,t,n,i){return s.number(e,{decimalSep:t||".",decimalPlaces:+n||null,maxDigits:+i})},numeric:function(e,t,n,i){return t=t||".",-1!==e.indexOf(t)?l.decimal(e,t,n,i):l.integer(e)},range:function(e,t,n,i){return e=+e,t=+t,n=+n,isNaN(e)||isNaN(t)||isNaN(n)?!1:t>e||e>n?!1:i?0===(e-t)%i:!0},color:function(e){return s.isColor(e)},matches:function(e,t){return e===this.getFormElements()[t][0].getValue()}},h=new a({en_US:{"formvalidator.required":"The {field} filling is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dashes":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}","formvalidator.validation_function_not_found":"The rule {rule} has not been defined"},pt_PT:{"formvalidator.required":"Preencher {field}  obrigatrio","formvalidator.min_length":"{field} deve ter no mnimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho mximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail vlido","formvalidator.url":"O {field} deve ser um URL vlido","formvalidator.ip":"{field} no tem um endereo IP {param1} vlido","formvalidator.phone":"{field} deve ser preenchido com um nmero de telefone {param1} vlido.","formvalidator.credit_card":"{field} no tem um carto de crdito {param1} vlido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfabticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfabticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfabticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e nmeros","formvalidator.alpha_dashes":"{field} deve conter apenas letras e traos","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um dgito","formvalidator.integer":"{field} deve conter um nmero inteiro","formvalidator.decimal":"{field} deve conter um nmero vlido","formvalidator.numeric":"{field} deve conter um nmero vlido","formvalidator.range":"{field} deve conter um nmero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor vlida","formvalidator.matches":"{field} deve corresponder ao campo {param1}","formvalidator.validation_function_not_found":"[A regra {rule} no foi definida]"}},"en_US"),d=function(n,i){this._element=e.elOrSelector(n,"Invalid FormElement"),this._errors={},this._rules={},this._value=null,this._options=Ink.extendObj({label:this._getLabel()},t.data(this._element)),this._options=Ink.extendObj(this._options,i||{})};d.prototype={_getLabel:function(){var e=t.findUpwardsByClass(this._element,"control-group"),n=Ink.s("label",e);return n=n?t.textContent(n):this._element.name||this._element.id||""},_parseRules:function(e){this._rules={},e=e.split("|");var t,n,i,r,o=e.length;if(o>0)for(t=0;o>t;t++)if(n=e[t])if(-1!==(r=n.indexOf("["))){i=n.substr(r+1),i=i.split("]"),i=i[0],i=i.split(",");for(var a=0,s=i.length;s>a;a++)i[a]="true"===i[a]?!0:"false"===i[a]?!1:i[a];i.splice(0,0,this.getValue()),n=n.substr(0,r),this._rules[n]=i}else this._rules[n]=[this.getValue()]},_addError:function(e){for(var t=this._rules[e]||[],n={field:this._options.label,value:this.getValue()},i=1;i<t.length;i++)n["param"+i]=t[i];var r="formvalidator."+e;this._errors[e]=h.text(r,n),this._errors[e]===r&&(this._errors[e]="Validation message not found")},getValue:function(){switch(this._element.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",this._element).value;case"textarea":return this._element.innerHTML;case"input":if(!("type"in this._element))return this._element.value;if("radio"===this._element.type&&"checkbox"===this._element.type){if(this._element.checked)return this._element.value}else if("file"!==this._element.type)return this._element.value;return;default:return this._element.innerHTML}},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){if(this._errors={},this._parseRules(this._options.rules),"required"in this._rules||""!==this.getValue())for(var e in this._rules)if(this._rules.hasOwnProperty(e)){if("function"!=typeof l[e])return this._addError(null),!1;if(l[e].apply(this,this._rules[e])===!1)return this._addError(e),!1}return!0}};var c=function(i,r){this._rootElement=e.elOrSelector(i),this._formElements={},this._errorMessages=[],this._markedErrorElements=[],this._options=Ink.extendObj({eventTrigger:"submit",searchFor:"input, select, textarea, .control-group",beforeValidation:void 0,onError:void 0,onSuccess:void 0},t.data(this._rootElement)),this._options=Ink.extendObj(this._options,r||{}),"string"==typeof this._options.eventTrigger&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this)),this._init()};return c.setRule=function(e,t,n){if(l[e]=n,h.getKey("formvalidator."+e)!==t){var i={};i["formvalidator."+e]=t;var r={};r[h.lang()]=i,h.append(r)}},c.getI18n=function(){return h},c.setI18n=function(e){h=e},c.appendI18n=function(){h.append.apply(h,[].slice.call(arguments))},c.setLanguage=function(e){h.lang(e)},c.getRules=function(){return l},c.prototype={_init:function(){},getElements:function(){this._formElements={};var e=i.select(this._options.searchFor,this._rootElement);if(e.length){var n,r;for(n=0;n<e.length;n+=1){r=e[n];var o=t.data(r);if("rules"in o){var a,s={form:this};"name"in r&&r.name?a=r.name:"id"in r&&r.id?a=r.id:(a="element_"+Math.floor(100*Math.random()),r.id=a),a in this._formElements?this._formElements[a].push(new d(r,s)):this._formElements[a]=[new d(r,s)]}}}return this._formElements},validate:function(e){n.stop(e),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation(),this.getElements();var i=[];for(var a in this._formElements)if(this._formElements.hasOwnProperty(a))for(var s=0;s<this._formElements[a].length;s+=1)this._formElements[a][s].validate()||i.push(this._formElements[a][s]);return 0===i.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):("function"==typeof this._options.onError&&this._options.onError(i),o.each(this._markedErrorElements,Ink.bind(r.removeClassName,r,"validation")),o.each(this._markedErrorElements,Ink.bind(r.removeClassName,r,"error")),o.each(this._errorMessages,t.remove),this._errorMessages=[],this._markedErrorElements=[],o.each(i,Ink.bind(function(e){var n,i;r.hasClassName(e.getElement(),"control-group")?(n=e.getElement(),i=Ink.s(".control",e.getElement())):(n=t.findUpwardsByClass(e.getElement(),"control-group"),i=t.findUpwardsByClass(e.getElement(),"control")),i&&n||(i=n=e.getElement()),r.addClassName(n,"validation"),r.addClassName(n,"error"),this._markedErrorElements.push(n);var o=document.createElement("p");r.addClassName(o,"tip"),t.insertAfter(o,i);var a=e.getErrors(),s=[];for(var l in a)a.hasOwnProperty(l)&&s.push(a[l]);o.innerHTML=s.join("<br/>"),this._errorMessages.push(o)},this)),!1)}},c});
Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,r,o){"use strict";var s=function(t,n){if(!e.isDOMElement(t)&&"string"!=typeof t)throw"[ImageQuery] :: Invalid selector";if("string"==typeof t){if(this._element=r.select(t),this._element.length<1)throw"[ImageQuery] :: Selector has returned no elements";if(this._element.length>1){var o;for(o=1;o<this._element.length;o+=1)new Ink.UI.ImageQuery(this._element[o],n)}this._element=this._element[0]}else this._element=t;this._options=Ink.extendObj({queries:[],onLoad:null},i.data(this._element)),this._options=Ink.extendObj(this._options,n||{});var s;if(-1!==(s=this._element.src.lastIndexOf("?"))){var a=this._element.src.substr(s);this._filename=this._element.src.replace(a,"").split("/").pop()+a}else this._filename=this._element.src.split("/").pop();this._init()};return s.prototype={_init:function(){this._options.queries=o.sortMulti(this._options.queries,"width").reverse(),this._handlers={resize:Ink.bindEvent(this._onResize,this),load:Ink.bindEvent(this._onLoad,this)},"function"==typeof this._options.onLoad&&t.observe(this._element,"onload",this._handlers.load),t.observe(window,"resize",this._handlers.resize),this._handlers.resize.call(this)},_onResize:function(){clearTimeout(e);var e=setTimeout(Ink.bind(function(){if(!this._options.queries||this._options.queries==={})return clearTimeout(e),void 0;var t,n,i;for("number"==typeof window.innerWidth?i=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?i=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(i=document.body.clientWidth),t=0;t<this._options.queries.length;t+=1)if(this._options.queries[t].width<=i){n=t;break}"undefined"==typeof n&&(n=this._options.queries.length-1);var r=this._options.queries[n].src||this._options.src;if("devicePixelRatio"in window&&window.devicePixelRatio>1&&"retina"in this._options&&(r=this._options.queries[n].retina||this._options.retina),this._options.queries[n].file=this._filename,"function"==typeof r&&(r=r.apply(this,[this._element,this._options.queries[n]]),"string"!=typeof r))throw'[ImageQuery] :: "src" callback does not return a string';var o;for(o in this._options.queries[n])if(this._options.queries[n].hasOwnProperty(o)){if("src"===o||"retina"===o)continue;r=r.replace("{:"+o+"}",this._options.queries[n][o])}this._element.src=r,delete this._options.queries[n].file,e=void 0},this),300)},_onLoad:function(){this._options.onLoad.call(this)}},s});
Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,r,o){"use strict";var s=function(e,s){if("string"!=typeof e&&"object"!=typeof e&&"undefined"==typeof s.markup)throw"Invalid Modal selector";if("string"==typeof e){if(""!==e){if(this._element=r.select(e),0===this._element.length)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else e&&(this._element=e);if(this._options={width:void 0,height:void 0,shadeClass:void 0,modalClass:void 0,trigger:void 0,triggerEvent:"click",autoDisplay:!0,markup:void 0,onShow:void 0,onDismiss:void 0,closeOnClick:!1,responsive:!0,disableScroll:!0},this._handlers={click:Ink.bindEvent(this._onClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:Ink.bindEvent(this._onResize,this)},this._wasDismissed=!1,this._markupMode=this._element?n.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalDivStyle=this._modalDiv.style,this._modalShadow=this._modalDiv.parentNode,this._modalShadowStyle=this._modalShadow.style,this._contentContainer=r.select(".modal-body",this._modalDiv),!this._contentContainer.length)throw'Missing div with class "modal-body"';this._contentContainer=this._contentContainer[0],this._options.markup=this._contentContainer.innerHTML,this._options=Ink.extendObj(this._options,i.data(this._element))}else this._modalShadow=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style,this._modalDiv=document.createElement("div"),this._modalDivStyle=this._modalDiv.style,this._element&&(this._options.markup=this._element.innerHTML),n.addClassName(this._modalShadow,"ink-shade"),n.addClassName(this._modalDiv,"ink-modal"),n.addClassName(this._modalDiv,"ink-space"),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._options=Ink.extendObj(this._options,s||{}),this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&o.each(this._options.shadeClass.split(" "),Ink.bind(function(e){n.addClassName(this._modalShadow,e.trim())},this)),"string"==typeof this._options.modalClass&&o.each(this._options.modalClass.split(" "),Ink.bind(function(e){n.addClassName(this._modalDiv,e.trim())},this)),"trigger"in this._options&&"undefined"!=typeof this._options.trigger){var a,l;if("string"==typeof this._options.trigger&&(a=r.select(this._options.trigger),a.length>0))for(l=0;l<a.length;l++)t.observe(a[l],this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()};return s.prototype={_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%",this._modalDivStyle.marginTop="-"+~~(i.elementHeight(this._modalDiv)/2)+"px",this._modalDivStyle.marginLeft="-"+~~(i.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(e){"boolean"==typeof e?this._timeoutResizeFunction.call(this):this._resizeTimeout||"object"!=typeof e||(this._resizeTimeout=setTimeout(Ink.bind(this._timeoutResizeFunction,this),250))},_timeoutResizeFunction:function(){var e="CSS1Compat"===document.compatMode?document.documentElement:document.body,t=parseInt(e.clientHeight,10),n=parseInt(e.clientWidth,10);this._modalDivStyle.width=n>this.originalStatus.width?this._modalDivStyle.maxWidth:~~(.9*n)+"px",this._modalDivStyle.height=t>this.originalStatus.height&&parseInt(this._modalDivStyle.maxHeight,10)>=i.elementHeight(this._modalDiv)?this._modalDivStyle.maxHeight:~~(.9*t)+"px",this._resizeContainer(),this._reposition(),this._resizeTimeout=void 0},_onClick:function(e){var o=t.element(e);if(n.hasClassName(o,"ink-close")||n.hasClassName(o,"ink-dismiss")||i.findUpwardsByClass(o,"ink-close")||i.findUpwardsByClass(o,"ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,o)||o===this._shadeElement)){for(var s=r.select(".ink-alert",this._shadeElement),a=s.length,l=0;a>l;l++)if(i.descendantOf(s[l],o))return;t.stop(e),this.dismiss()}},_onKeyDown:function(e){27!==e.keyCode||this._wasDismissed||this.dismiss()},_resizeContainer:function(){this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden";var e=i.elementHeight(this._modalDiv);this._modalHeader=r.select(".modal-header",this._modalDiv),this._modalHeader.length>0&&(this._modalHeader=this._modalHeader[0],e-=i.elementHeight(this._modalHeader)),this._modalFooter=r.select(".modal-footer",this._modalDiv),this._modalFooter.length>0&&(this._modalFooter=this._modalFooter[0],e-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=e+"px",e!==i.elementHeight(this._contentContainer)&&(this._contentContainer.style.height=~~(e-(i.elementHeight(this._contentContainer)-e))+"px"),this._markupMode||(this._contentContainer.style.overflow=this._contentContainer.style.overflowX="hidden",this._contentContainer.style.overflowY="auto",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible")},_disableScroll:function(){this._oldScrollPos=i.scroll(),this._onScrollBinded=Ink.bindEvent(function(e){var n=t.element(e);i.descendantOf(this._modalShadow,n)||(t.stop(e),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))},this),t.observe(window,"scroll",this._onScrollBinded),t.observe(document,"touchmove",this._onScrollBinded)},open:function(r){r&&t.stop(r);var o="CSS1Compat"===document.compatMode?document.documentElement:document.body;this._resizeTimeout=null,n.addClassName(this._modalShadow,"ink-shade"),this._modalShadowStyle.display=this._modalDivStyle.display="block",setTimeout(Ink.bind(function(){n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible")},this),100),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),"undefined"!=typeof this._options.width?(this._modalDivStyle.width=this._options.width,-1===this._options.width.indexOf("%")&&(this._modalDivStyle.maxWidth=i.elementWidth(this._modalDiv)+"px")):this._modalDivStyle.maxWidth=this._modalDivStyle.width=i.elementWidth(this._modalDiv)+"px",parseInt(o.clientWidth,10)<=parseInt(this._modalDivStyle.width,10)&&(this._modalDivStyle.width=~~(.9*parseInt(o.clientWidth,10))+"px"),"undefined"!=typeof this._options.height?(this._modalDivStyle.height=this._options.height,-1===this._options.height.indexOf("%")&&(this._modalDivStyle.maxHeight=i.elementHeight(this._modalDiv)+"px")):this._modalDivStyle.maxHeight=this._modalDivStyle.height=i.elementHeight(this._modalDiv)+"px",parseInt(o.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=~~(.9*parseInt(o.clientHeight,10))+"px"),this.originalStatus={viewportHeight:parseInt(o.clientHeight,10),viewportWidth:parseInt(o.clientWidth,10),width:parseInt(this._modalDivStyle.maxWidth,10),height:parseInt(this._modalDivStyle.maxHeight,10)},this._options.responsive?(this._onResize(!0),t.observe(window,"resize",this._handlers.resize)):(this._resizeContainer(),this._reposition()),this._options.onShow&&this._options.onShow(this),this._options.disableScroll&&this._disableScroll(),t.observe(this._shadeElement,"click",this._handlers.click),t.observe(document,"keydown",this._handlers.keyDown),e.registerInstance(this,this._shadeElement,"modal"),this._wasDismissed=!1},dismiss:function(){if(this._options.onDismiss){var e=this._options.onDismiss(this);if(e===!1)return}if(this._wasDismissed=!0,this._options.disableScroll&&(t.stopObserving(window,"scroll",this._onScrollBinded),t.stopObserving(document,"touchmove",this._onScrollBinded)),this._options.responsive&&t.stopObserving(window,"resize",this._handlers.resize),this._markupMode){n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible");var i,r=Ink.bindEvent(function(){i&&(this._modalShadowStyle.display="none",t.stopObserving(document,"transitionend",r),t.stopObserving(document,"oTransitionEnd",r),t.stopObserving(document,"webkitTransitionEnd",r),clearInterval(i),i=void 0)},this);t.observe(document,"transitionend",r),t.observe(document,"oTransitionEnd",r),t.observe(document,"webkitTransitionEnd",r),i||(i=setInterval(Ink.bind(function(){this._modalShadowStyle.opacity>0||(this._modalShadowStyle.display="none",clearInterval(i),i=void 0)},this),500))}else this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()},destroy:function(){e.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(e){if(this._markupMode)this._contentContainer.innerHTML=[e].join("");else{if(this._modalDiv.innerHTML=[e].join(""),this._contentContainer=r.select(".modal-body",this._modalDiv),!this._contentContainer.length){var t=r.select(".modal-header",this._modalDiv),i=r.select(".modal-footer",this._modalDiv);o.each(t,Ink.bind(function(e){e.parentNode.removeChild(e)},this)),o.each(i,Ink.bind(function(e){e.parentNode.removeChild(e)},this));var s=document.createElement("div");n.addClassName(s,"modal-body"),s.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="",o.each(t,Ink.bind(function(e){this._modalDiv.appendChild(e)},this)),this._modalDiv.appendChild(s),o.each(i,Ink.bind(function(e){this._modalDiv.appendChild(e)},this)),this._contentContainer=r.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},s});
Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(e,t,n,i,r){"use strict";var o=function(e,t){var n=document.createElement("a");return n.setAttribute("href","#"),void 0!==t&&n.setAttribute("data-index",t),n.innerHTML=e,n},s=function(t,r){if(this._element=e.elOrSelector(t,"1st argument"),this._options=Ink.extendObj({size:void 0,start:1,firstLabel:"First",lastLabel:"Last",previousLabel:"Previous",nextLabel:"Next",onChange:void 0,setHash:!1,hashParameter:"page",numberFormatter:function(e){return e+1}},r||{},i.data(this._element)),this._options.previousPageLabel||(this._options.previousPageLabel="Previous "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel="Next "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},!e.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(!e.isInteger(this._options.start)&&this._options.start>0&&this._options.start<=this._options.size)throw new TypeError("start option is a required integer between 1 and size!");if(this._options.maxSize&&!e.isInteger(this._options.maxSize)&&this._options.maxSize>0)throw new TypeError("maxSize option is a positive integer!");if(this._options.size<0)throw new RangeError("size option must be equal or more than 0!");if(void 0!==this._options.onChange&&"function"!=typeof this._options.onChange)throw new TypeError("onChange option must be a function!");n.hasClassName(Ink.s("ul",this._element),"dotted")&&(this._options.numberFormatter=function(){return'<i class="icon-circle"></i>'}),this._current=this._options.start-1,this._itemLiEls=[],this._init()};return s.prototype={_init:function(){this._generateMarkup(this._element),this._updateItems(),this._observe(),e.registerInstance(this,this._element,"pagination")},_observe:function(){t.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var e,t,i,r=this._itemLiEls,s=this._options.size===r.length;if(s)for(e=0,t=this._options.size;t>e;++e)n.setClassName(r[e],"active",e===this._current);else{for(e=r.length-1;e>=0;--e)this._ulEl.removeChild(r[e]);for(r=[],e=0,t=this._options.size;t>e;++e)i=document.createElement("li"),i.appendChild(o(this._options.numberFormatter(e),e)),n.setClassName(i,"active",e===this._current),this._ulEl.insertBefore(i,this._nextEl),r.push(i);this._itemLiEls=r}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(e=0,t=this._options.size;t>e;++e)i=r[e],n.setClassName(i,"hide-all",l>e||e>h);this._pageStart=l,this._pageEnd=h,this._page=a,n.setClassName(this._prevPageEl,"disabled",!this.hasPreviousPage()),n.setClassName(this._nextPageEl,"disabled",!this.hasNextPage()),n.setClassName(this._firstEl,"disabled",this.isFirst()),n.setClassName(this._lastEl,"disabled",this.isLast())}n.setClassName(this._prevEl,"disabled",!this.hasPrevious()),n.setClassName(this._nextEl,"disabled",!this.hasNext())},_generateMarkup:function(e){n.addClassName(e,"ink-navigation");var t,i,s=!1;(t=r.select("ul.pagination",e)).length<1?(t=document.createElement("ul"),n.addClassName(t,"pagination")):(s=!0,t=t[0]),this._options.maxSize&&(i=document.createElement("li"),i.appendChild(o(this._options.firstLabel)),this._firstEl=i,n.addClassName(i,"first"),t.appendChild(i),i=document.createElement("li"),i.appendChild(o(this._options.previousPageLabel)),this._prevPageEl=i,n.addClassName(i,"previousPage"),t.appendChild(i)),i=document.createElement("li"),i.appendChild(o(this._options.previousLabel)),this._prevEl=i,n.addClassName(i,"previous"),t.appendChild(i),i=document.createElement("li"),i.appendChild(o(this._options.nextLabel)),this._nextEl=i,n.addClassName(i,"next"),t.appendChild(i),this._options.maxSize&&(i=document.createElement("li"),i.appendChild(o(this._options.nextPageLabel)),this._nextPageEl=i,n.addClassName(i,"nextPage"),t.appendChild(i),i=document.createElement("li"),i.appendChild(o(this._options.lastLabel)),this._lastEl=i,n.addClassName(i,"last"),t.appendChild(i)),s||e.appendChild(t),this._ulEl=t},_onClick:function(e){t.stop(e);var i=t.element(e);if("a"!==i.nodeName.toLowerCase()){do i=i.parentNode;while("a"!==i.nodeName.toLowerCase()&&i!==this._element);if(i===this._element)return}var r=i.parentNode;if("li"===r.nodeName.toLowerCase()&&!n.hasClassName(r,"active")&&!n.hasClassName(r,"disabled")){var o=n.hasClassName(r,"previous"),s=n.hasClassName(r,"next"),a=n.hasClassName(r,"previousPage"),l=n.hasClassName(r,"nextPage"),h=n.hasClassName(r,"first"),d=n.hasClassName(r,"last");if(h)this.setCurrent(0);else if(d)this.setCurrent(this._options.size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0);else if(o||s)this.setCurrent(o?-1:1,!0);else{var c=parseInt(i.getAttribute("data-index"),10);this.setCurrent(c)}}},setSize:function(t){if(!e.isInteger(t))throw new TypeError("1st argument must be an integer number!");this._options.size=t,this._updateItems(),this._current=0},setCurrent:function(t,n){if(!e.isInteger(t))throw new TypeError("1st argument must be an integer number!");n&&(t+=this._current),0>t?t=0:t>this._options.size-1&&(t=this._options.size-1),this._current=t,this._updateItems(),this._options.onChange&&this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._options.size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._options.size-this._current>=this._options.maxSize+1},destroy:e.destroyComponent},s});
Ink.createModule("Ink.UI.ProgressBar","1",["Ink.Dom.Selector_1","Ink.Dom.Element_1"],function(e,t){"use strict";var n=function(n,i){if("object"!=typeof n){if("string"!=typeof n)throw"[Ink.UI.ProgressBar] :: Invalid selector";if(this._element=e.select(n),this._element.length<1)throw"[Ink.UI.ProgressBar] :: Selector didn't find any elements";this._element=this._element[0]}else this._element=n;this._options=Ink.extendObj({startValue:0,onStart:function(){},onEnd:function(){}},t.data(this._element)),this._options=Ink.extendObj(this._options,i||{}),this._value=this._options.startValue,this._init()};return n.prototype={_init:function(){if(this._elementBar=e.select(".bar",this._element),this._elementBar.length<1)throw"[Ink.UI.ProgressBar] :: Bar element not found";this._elementBar=this._elementBar[0],this._options.onStart=Ink.bind(this._options.onStart,this),this._options.onEnd=Ink.bind(this._options.onEnd,this),this.setValue(this._options.startValue)},setValue:function(e){this._options.onStart(this._value),e=parseInt(e,10),isNaN(e)||0>e?e=0:e>100&&(e=100),this._value=e,this._elementBar.style.width=this._value+"%",this._options.onEnd(this._value)}},n});
Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Loaded_1"],function(e,t,n){"use strict";var i=window.requestAnimationFrame||function(e){return setTimeout(e,10)},r=window.cancelAnimationFrame||function(e){clearTimeout(e)},o={speed:10,getTop:function(e){return Math.round(o.scrollTop()+e.getBoundingClientRect().top)},scrollTop:function(){var e=document.body,t=document.documentElement;return e&&e.scrollTop?e.scrollTop:t&&t.scrollTop?t.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(t,n,i){e.observe(t,n,i)},end:function(t){return window.event?(window.event.cancelBubble=!0,window.event.returnValue=!1,void 0):(e.stop(t),void 0)},scroll:function(e){var t=o.scrollTop();t+=e>t?Math.ceil((e-t)/o.speed):(e-t)/o.speed,window.scrollTo(0,t),r(o.interval),t!==e&&o.offsetTop!==t?o.interval=i(Ink.bindMethod(o,"scroll",e),document.body):o.onDone(),o.offsetTop=t},init:function(e){n.run(Ink.bindMethod(o,"render",e))},render:function(n){for(var i=t.select(n||"a.scrollableLink,a.ink-smooth-scroll"),r=0;r<i.length;r++){var s=i[r];!s.href||-1===s.href.indexOf("#")||s.pathname!==location.pathname&&"/"+s.pathname!==location.pathname||e.observe(s,"click",Ink.bindEvent(o.onClick,this,s))}},onClick:function(e,n){if(o.end(e),null!==n&&null!==n.getAttribute("href")){var i=n.href.indexOf("#");if(-1===i)return;var r=n.href.substr(i+1),s="ul > li.active > "+a,a='a[name="'+r+'"],#'+r,l=t.select(a)[0],h=t.select(s)[0];h=h&&h.parentNode,"undefined"!=typeof l&&(-1===n.parentNode.className.indexOf("active")&&(h&&(h.className=h.className.replace(/(^|\s+)active($|\s+)/g,"")),n.parentNode.className+=" active"),o.hash=r,o.scroll(o.getTop(l)))}},onDone:function(){window.location.hash=o.hash}};return o});
Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,r,o){"use strict";var s=function(t,n){if(this._element=e.elOrSelector(t,"1st argument"),!e.isDOMElement(t)&&"string"!=typeof t)throw"[Ink.UI.SortableList] :: Invalid selector";if("string"==typeof t){if(this._element=Ink.Dom.Selector.select(t),this._element.length<1)throw"[Ink.UI.SortableList] :: Selector has returned no elements";this._element=this._element[0]}else this._element=t;if(this._options=Ink.extendObj({dragObject:"li"},Ink.Dom.Element.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._model=[],this._index=void 0,this._isMoving=!1,this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}if(this._dragTriggers=r.select(this._options.dragObject,this._element),!this._dragTriggers)throw"[Ink.UI.SortableList] :: Drag object not found";this._init()};return s.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var n="ontouchstart"in document.documentElement;this._down=n?"touchstart":"mousedown",this._move=n?"touchmove":"mousemove",this._up=n?"touchend":"mouseup";var i=document.body;t.observe(i,this._move,this._handlers.move),t.observe(i,this._up,this._handlers.up),this._observe(),e.registerInstance(this,this._element,"sortableList")},_observe:function(){t.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var e=this,t=r.select("> li",this._element);o.each(t,function(t){var n=t.innerHTML;e._model.push(n)})},_generateMarkup:function(){var e=document.createElement("ul");e.className="unstyled ink-sortable-list";var t=this;return o.each(this._model,function(n,i){var r=document.createElement("li");i===t._index&&(r.className="drag"),r.innerHTML=[n].join(""),e.appendChild(r)}),e},_getY:function(e){return 0===e.type.indexOf("touch")?e.changedTouches[0].pageY:"number"==typeof e.pageY?e.pageY:e.clientY},_refresh:function(t){var n=this._generateMarkup();this._element.parentNode.replaceChild(n,this._element),this._element=n,e.restoreIdAndClasses(this._element,this),this._dragTriggers=r.select(this._options.dragObject,this._element),t||this._observe()},_onDown:function(n){if(!this._isMoving){var i=t.element(n);if(!o.inArray(i,this._dragTriggers)){for(;!o.inArray(i,this._dragTriggers)&&"body"!==i.nodeName.toLowerCase();)i=i.parentNode;if("body"===i.nodeName.toLowerCase())return}t.stop(n);var r;if("li"!==i.nodeName.toLowerCase())for(;"li"!==i.nodeName.toLowerCase()&&"body"!==i.nodeName.toLowerCase();)i=i.parentNode;return r=i,this._index=e.childIndex(r),this._height=r.offsetHeight,this._startY=this._getY(n),this._isMoving=!0,document.body.style.cursor="move",this._refresh(!1),!1}},_onMove:function(e){if(this._isMoving){t.stop(e);var n=this._getY(e),i=n-this._startY,r=i>0?1:-1,o=r*Math.floor(Math.abs(i)/this._height);if(0!==o&&(o/=Math.abs(o),!(-1===o&&0===this._index||1===o&&this._index===this._model.length-1))){var s=o>0?this._index:this._index+o,a=0>o?this._index:this._index+o;this._model.splice(s,2,this._model[a],this._model[s]),this._index+=o,this._startY=n,this._refresh(!1)}}},_onUp:function(e){this._isMoving&&(t.stop(e),this._index=void 0,this._isMoving=!1,document.body.style.cursor="",this._refresh())},getModel:function(){return this._model.slice()},destroy:e.destroyComponent},s});
Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,o,r){"use strict";var s=function(t,n){this._rootElement=e.elOrSelector(t,"1st argument"),this._options=Ink.extendObj({target:void 0},i.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),this._options.target=e.elOrSelector(this._options.target,"Target"),this._scrollTimeout=null,this._init()};return s.prototype={_elements:[],_init:function(){t.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),this._elements.push(this._rootElement)},_onScroll:function(){var e=i.scrollHeight();if(!(e<this._rootElement.offsetTop)){for(var t=0,s=this._elements.length;s>t;t++)if(this._elements[t].offsetTop<=e&&this._elements[t]!==this._rootElement&&this._elements[t].offsetTop>this._rootElement.offsetTop)return;r.each(o.select("a",this._options.target),Ink.bind(function(e){var t="name"in this._rootElement&&this._rootElement.name?"#"+this._rootElement.name:"#"+this._rootElement.id;e.href.substr(e.href.indexOf("#"))===t?n.addClassName(i.findUpwardsByTag(e,"li"),"active"):n.removeClassName(i.findUpwardsByTag(e,"li"),"active")},this))}}},s});
Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(e,t,n,i){"use strict";var o=function(t,n){if("object"!=typeof t&&"string"!=typeof t)throw"[Sticky] :: Invalid selector defined";this._rootElement=e.elOrSelector(t,"[Sticky] :: Can't find any element with the specified selector"),this._options=Ink.extendObj({offsetBottom:0,offsetTop:0,topElement:null,bottomElement:null},n||{},i.data(this._rootElement)),this._options.topElement&&(this._topElement=e.elOrSelector(this._options.topElement,"Top Element")),this._options.bottomElement&&(this._bottomElement=e.elOrSelector(this._options.bottomElement,"Bottom Element")),this._init()};return o.prototype={_init:function(){t.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),t.observe(window,"resize",Ink.bindEvent(this._onResize,this))},_onScroll:t.throttle(function(){var e="CSS1Compat"===document.compatMode?document.documentElement:document.body,t=this._rootElement;if(100*i.elementWidth(this._rootElement)/e.clientWidth>90||e.clientWidth<=649)return i.hasAttribute(t,"style")&&t.removeAttribute("style"),void 0;var o=t.getBoundingClientRect(),r=this._topElement&&this._topElement.getBoundingClientRect(),s=this._bottomElement&&this._bottomElement.getBoundingClientRect(),a=this._options.offsetTop?parseInt(this._options.offsetTop,10):0,l=this._options.offsetBottom?parseInt(this._options.offsetBottom,10):0,h=o.bottom-o.top,d=(parseInt(n.getStyle(t,"margin-top"),10)||0)+(parseInt(n.getStyle(t,"margin-bottom"),10)||0),c=this._lastStickingTo;s&&s.top<h+a+l+d?(c="bottom",t.style.position="fixed",t.style.top=s.top-h-l-d+"px"):!r||r.bottom>a?(c="[normal]",t.style.position="static",t.style.top="auto"):r&&r.bottom<=a&&(c="top",t.style.position="fixed",t.style.top=a+"px"),c!==this._lastStickingTo&&(n.addRemoveClassName(t,"ink-sticky-top","top"===c),n.addRemoveClassName(t,"ink-sticky-bottom","bottom"===c))},80),_onResize:t.throttle(function(){this._onScroll()},80)},o});
Ink.createModule("Ink.UI.Table","1",["Ink.Net.Ajax_1","Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1"],function(e,t,n,i,o,r,s,a){"use strict";var l=function(e,n){if(this._rootElement=t.elOrSelector(e,"1st argument"),"table"!==this._rootElement.nodeName.toLowerCase())throw"[Ink.UI.Table] :: The element is not a table";this._options=Ink.extendObj({pageSize:void 0,endpoint:void 0,loadMode:"full",allowResetSorting:!1,visibleFields:void 0},o.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),this._markupMode="undefined"==typeof this._options.endpoint,this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.split(",")),this._handlers={click:Ink.bindEvent(this._onClick,this)},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._headers=[],this._pagination=null,this._totalRows=0,this._init()};return l.prototype={_init:function(){if(this._markupMode){if(this._setHeadersHandlers(),s.each(r.select("tbody tr",this._rootElement),Ink.bind(function(e){this._data.push(e)},this)),this._originalData=this._data.slice(0),this._totalRows=this._data.length,"pageSize"in this._options&&"undefined"!=typeof this._options.pageSize){for(this._pagination=this._rootElement.nextSibling;1!==this._pagination.nodeType;)this._pagination=this._pagination.nextSibling;if("nav"!==this._pagination.nodeName.toLowerCase())throw"[Ink.UI.Table] :: Missing the pagination markup or is mis-positioned";var e=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new e(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(e){this._paginate(e._current+1)},this)}),this._paginate(1)}}else this._getData(this._options.endpoint,!0)},_onClick:function(e){var i,l,h=n.element(e),d=o.data(h),c="pageSize"in this._options&&"undefined"!=typeof this._options.pageSize;if("th"===h.nodeName.toLowerCase()&&"sortable"in d&&"true"===d.sortable.toString()){if(n.stop(e),i=-1,s.inArray(h,this._headers))for(l=0;l<this._headers.length;l++)if(this._headers[l]===h){i=l;break}if(!this._markupMode&&c){for(var u in this._sortableFields)u!=="col_"+i&&(this._sortableFields[u]="none",this._headers[u.replace("col_","")].innerHTML=a.stripTags(this._headers[u.replace("col_","")].innerHTML));"asc"===this._sortableFields["col_"+i]?(this._sortableFields["col_"+i]="desc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+i]="asc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-up"></i>'),this._pagination.setCurrent(this._pagination._current)}else{if(-1===i)return;if("desc"===this._sortableFields["col_"+i]&&this._options.allowResetSorting&&"true"===this._options.allowResetSorting.toString())this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML),this._sortableFields["col_"+i]="none",this._data=this._originalData.slice(0);else{for(var u in this._sortableFields)u!=="col_"+i&&(this._sortableFields[u]="none",this._headers[u.replace("col_","")].innerHTML=a.stripTags(this._headers[u.replace("col_","")].innerHTML));this._sort(i),"asc"===this._sortableFields["col_"+i]?(this._data.reverse(),this._sortableFields["col_"+i]="desc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+i]="asc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-up"></i>')}var p=r.select("tbody",this._rootElement)[0];t.cleanChildren(p),s.each(this._data,function(e){p.appendChild(e)}),this._pagination.setCurrent(0),this._paginate(1)}}},_paginate:function(e){s.each(this._data,Ink.bind(function(t,n){n>=(e-1)*parseInt(this._options.pageSize,10)&&n<(e-1)*parseInt(this._options.pageSize,10)+parseInt(this._options.pageSize,10)?i.removeClassName(t,"hide-all"):i.addClassName(t,"hide-all")},this))},_sort:function(e){this._data.sort(Ink.bind(function(t,n){var i=o.textContent(r.select("td",t)[e]),s=o.textContent(r.select("td",n)[e]),a=new RegExp(/\d/g);return!isNaN(i)&&a.test(i)?i=parseInt(i,10):isNaN(i)||(i=parseFloat(i)),!isNaN(s)&&a.test(s)?s=parseInt(s,10):isNaN(s)||(s=parseFloat(s)),i===s?0:i>s?1:-1},this))},_setHeaders:function(e,t){var n,i,s,a,l;if(0===(s=r.select("thead",this._rootElement)).length){s=this._rootElement.createTHead(),a=s.insertRow(0);for(n in e)if(e.hasOwnProperty(n)){if(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(n))continue;l=document.createElement("th"),i=e[n],"sortable"in i&&"true"===i.sortable.toString()&&l.setAttribute("data-sortable","true"),"label"in i&&o.setTextContent(l,i.label),this._originalFields.push(n),a.appendChild(l)}}else{var h=t[0];for(n in h)if(h.hasOwnProperty(n)){if(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(n))continue;this._originalFields.push(n)}}},_setHeadersHandlers:function(){var e=r.select("thead",this._rootElement);e.length&&(n.observe(e[0],"click",this._handlers.click),this._headers=r.select("thead tr th",this._rootElement),s.each(this._headers,Ink.bind(function(e,t){var n=o.data(e);"sortable"in n&&"true"===n.sortable.toString()&&(this._sortableFields["col_"+t]="none")},this)))},_setData:function(e){var t,n,i,o,s,a;n=r.select("tbody",this._rootElement),0===n.length?(n=document.createElement("tbody"),this._rootElement.appendChild(n)):(n=n[0],n.innerHTML=""),this._data=[];for(s in e)if(e.hasOwnProperty(s)){i=document.createElement("tr"),n.appendChild(i),a=0;for(t in e[s])if(e[s].hasOwnProperty(t)){if(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(t))continue;o=i.insertCell(a++),o.innerHTML=e[s][t]}this._data.push(i)}this._originalData=this._data.slice(0)},setEndpoint:function(e,t){this._markupMode||(this._options.endpoint=e,this._pagination.setCurrent(t?parseInt(t,10):0))},_setPagination:function(){if("pageSize"in this._options&&"undefined"!=typeof this._options.pageSize,"pageSize"in this._options&&"undefined"!=typeof this._options.pageSize&&!this._pagination){this._pagination=document.createElement("nav"),this._pagination.className="ink-navigation",this._rootElement.parentNode.insertBefore(this._pagination,this._rootElement.nextSibling),this._pagination.appendChild(document.createElement("ul")).className="pagination";var e=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new e(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(){this._getData(this._options.endpoint)},this)})}},_getData:function(e){Ink.requireModules(["Ink.Util.Url_1"],Ink.bind(function(t){var n=t.parseUrl(e),i="pageSize"in this._options&&"undefined"!=typeof this._options.pageSize,o=this._pagination?this._pagination._current+1:1;if(n.query=n.query?n.query.split("&"):[],i){n.query.push("rows_per_page="+this._options.pageSize),n.query.push("page="+o);for(var r in this._sortableFields)if("none"!==this._sortableFields[r]){n.query.push("sortField="+this._originalFields[parseInt(r.replace("col_",""),10)]),n.query.push("sortOrder="+this._sortableFields[r]);break}this._getDataViaAjax(e+"?"+n.query.join("&"))}else this._getDataViaAjax(e)},this))},_getDataViaAjax:function(t){var n="pageSize"in this._options&&"undefined"!=typeof this._options.pageSize;new e(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(e){if(200===e.status){var t=JSON.parse(e.responseText);0===this._headers.length&&(this._setHeaders(t.headers,t.rows),this._setHeadersHandlers()),this._setData(t.rows),n?this._totalRows&&parseInt(t.totalRows,10)!==parseInt(this._totalRows,10)?(this._totalRows=t.totalRows,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=t.totalRows:this._totalRows&&t.rows.length!==parseInt(this._totalRows,10)?(this._totalRows=t.rows.length,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=t.rows.length,this._setPagination()}},this)})}},l});
Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,o,r){"use strict";var s=function(t,n){if(e.isDOMElement(t))this._element=t;else{if(t=o.select(t),0===t.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=t[0]}this._options=Ink.extendObj({preventUrlChange:!1,active:void 0,disabled:[],onBeforeChange:void 0,onChange:void 0,triggerEventsOnLoad:!0},n||{},i.data(t)),this._handlers={tabClicked:Ink.bindEvent(this._onTabClicked,this),disabledTabClicked:Ink.bindEvent(this._onDisabledTabClicked,this),resize:Ink.bindEvent(this._onResize,this)},this._init()};return s.prototype={_init:function(){this._menu=o.select(".tabs-nav",this._element)[0],this._menuTabs=this._getChildElements(this._menu),this._contentTabs=o.select(".tabs-content",this._element),this._initializeDom(),this._observe(),this._setFirstActive(),this._changeTab(this._activeMenuLink,this._options.triggerEventsOnLoad),this._handlers.resize(),e.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var e=0;e<this._contentTabs.length;e++)n.hide(this._contentTabs[e])},_observe:function(){r.each(this._menuTabs,Ink.bind(function(e){var t=o.select("a",e)[0];r.inArray(t.getAttribute("href"),this._options.disabled)?this.disable(t):this.enable(t)},this)),t.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){var e=window.location.hash;this._activeContentTab=o.select(e,this._element)[0]||o.select(this._hashify(this._options.active),this._element)[0]||o.select(".tabs-content",this._element)[0],this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id")),this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(e,t){t&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var i=e.getAttribute("href");n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeContentTab,"active"),n.addClassName(this._activeContentTab,"hide-all"),this._activeMenuLink=e,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeContentTab=o.select(i.substr(i.indexOf("#")),this._element)[0],n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeContentTab,"active"),n.removeClassName(this._activeContentTab,"hide-all"),n.show(this._activeContentTab),t&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this)},_onTabClicked:function(e){t.stop(e);var n=t.findElement(e,"A");"a"===n.nodeName.toLowerCase()&&("true"!==this._options.preventUrlChange.toString()&&(window.location.hash=n.getAttribute("href").substr(n.getAttribute("href").indexOf("#"))),n!==this._activeMenuLink&&this.changeTab(n))},_onDisabledTabClicked:function(e){t.stop(e)},_onResize:function(){var t=e.currentLayout();t!==this._lastLayout&&(t===e.Layouts.SMALL||t===e.Layouts.MEDIUM?(n.removeClassName(this._menu,"menu"),n.removeClassName(this._menu,"horizontal")):(n.addClassName(this._menu,"menu"),n.addClassName(this._menu,"horizontal")),this._lastLayout=t)},_hashify:function(e){return e?0===e.indexOf("#")?e:"#"+e:""},_findLinkByHref:function(e){e=this._hashify(e);var t;return r.each(this._menuTabs,Ink.bind(function(n){var i=o.select("a",n)[0];-1!==i.getAttribute("href").indexOf("#")&&i.getAttribute("href").substr(i.getAttribute("href").indexOf("#"))===e&&(t=i)},this)),t},_getChildElements:function(e){for(var t=[],n=e.children,i=0;i<n.length;i++)1===n[i].nodeType&&t.push(n[i]);return t},changeTab:function(e){var t=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(e){var i=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));i&&(t.stopObserving(i,"click",this._handlers.tabClicked),t.observe(i,"click",this._handlers.disabledTabClicked),n.addClassName(i,"ink-disabled"))},enable:function(e){var i=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));i&&(t.stopObserving(i,"click",this._handlers.disabledTabClicked),t.observe(i,"click",this._handlers.tabClicked),n.removeClassName(i,"ink-disabled"))},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:e.destroyComponent},s});
Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,o,s){"use strict";var r=function(e,t){if("string"!=typeof e&&"object"!=typeof e)throw"[Ink.UI.Toggle] Invalid CSS selector to determine the root element";if("string"==typeof e){if(this._rootElement=o.select(e),this._rootElement.length<=0)throw"[Ink.UI.Toggle] Root element not found";this._rootElement=this._rootElement[0]}else this._rootElement=e;if(this._options=Ink.extendObj({target:void 0,triggerEvent:"click",closeOnClick:!0,closeOnInsideClick:"a[href]"},t||{},i.data(this._rootElement)),this._targets=function(e){return"string"==typeof e?o.select(e):"object"==typeof e?e.constructor===Array?e:[e]:[]}(this._options.target),!this._targets.length)throw"[Ink.UI.Toggle] Toggle target was not found! Supply a valid selector, array, or element through the `target` option.";this._init()};return r.prototype={_init:function(){this._accordion=n.hasClassName(this._rootElement.parentNode,"accordion")||n.hasClassName(this._targets[0].parentNode,"accordion"),t.observe(this._rootElement,this._options.triggerEvent,Ink.bindEvent(this._onTriggerEvent,this)),"true"===this._options.closeOnClick.toString()&&t.observe(document,"click",Ink.bindEvent(this._onClick,this)),this._options.closeOnInsideClick&&t.observeMulti(this._targets,"click",Ink.bindEvent(function(e){i.findUpwardsBySelector(t.element(e),this._options.closeOnInsideClick)&&this._dismiss()},this))},_onTriggerEvent:function(e){if(this._accordion){var s,r,a;for(a=n.hasClassName(this._targets[0].parentNode,"accordion")?this._targets[0].parentNode:this._targets[0].parentNode.parentNode,s=o.select(".toggle",a),r=0;r<s.length;r+=1){var l=i.data(s[r]),h=o.select(l.target,a);h.length>0&&h[0]!==this._targets[0]&&(h[0].style.display="none")}}for(var d,c,u=0,p=this._targets.length;p>u;u++)d="none"===n.getStyle(this._targets[u],"display")?"show-all":"hide-all",c="none"===n.getStyle(this._targets[u],"display")?"block":"none",n.removeClassName(this._targets[u],"show-all"),n.removeClassName(this._targets[u],"hide-all"),n.addClassName(this._targets[u],d),this._targets[u].style.display=c;"show-all"===d?n.addClassName(this._rootElement,"active"):n.removeClassName(this._rootElement,"active"),t.stop(e)},_onClick:function(e){var n,o=t.element(e),r=s.some(this._targets,function(e){return i.isAncestorOf(e,o)});if(this._rootElement!==o&&!i.isAncestorOf(this._rootElement,o)&&!r){if((n=Ink.ss(".ink-shade")).length)for(var a=n.length,l=0;a>l;l++)if(i.isAncestorOf(n[l],o)&&i.isAncestorOf(n[l],this._rootElement))return;i.findUpwardsByClass(o,"toggle")&&this._dismiss(this._rootElement)}},_dismiss:function(){if("none"!==n.getStyle(this._targets[0],"display")){for(var e=0,t=this._targets.length;t>e;e++)n.removeClassName(this._targets[e],"show-all"),n.addClassName(this._targets[e],"hide-all"),this._targets[e].style.display="none";n.removeClassName(this._rootElement,"active")}}},r});
Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(e,t,n,i,o,s){"use strict";function r(e,t){this._init(e,t||{})}function a(e,t){this._init(e,t)}var l,h,d;!function(){for(var e=document.createElement("DIV"),t=["transition","oTransition","msTransition","mozTransition","webkitTransition"],n=0;n<t.length;n++)if("undefined"!=typeof e.style[t[n]+"Duration"]){l=t[n]+"Duration",h=t[n]+"Property",d=t[n]+"TimingFunction";break}}();var c=document.getElementsByTagName("body"),u=c&&c.length?c[0]:document.documentElement;return r.prototype={_init:function(e,t){var n;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},t||{}),"string"==typeof e)n=i.select(e);else{if("object"!=typeof e)throw"Element expected";n=[e]}this.tooltips=[];for(var o=0,s=n.length;s>o;o++)this.tooltips[o]=new a(this,n[o])},destroy:function(){o.each(this.tooltips,function(e){e._destroy()}),this.tooltips=null,this.options=null}},a.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(e,n){t.observe(n,"mouseover",Ink.bindEvent(this._onMouseOver,this)),t.observe(n,"mouseout",Ink.bindEvent(this._onMouseOut,this)),t.observe(n,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=e,this.element=n,this._delayTimeout=null,this.tooltip=null},_makeTooltip:function(e){if(!this._getOpt("text"))return!1;var n=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=n,this._fadeInTooltipElement(n),this._placeTooltipElement(n,e),t.observe(n,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var i=this._getFloatOpt("timeout");i&&setTimeout(Ink.bind(function(){this.tooltip===n&&this._removeTooltip()},this),1e3*i)},_createTooltipElement:function(){var t,o,r=this._getOpt("template"),a=this._getOpt("templatefield");if(r){var l=document.createElement("DIV");if(l.innerHTML=e.elOrSelector(r,"options.template").outerHTML,t=l.firstChild,a){if(o=i.select(a,t),!o)throw"options.templatefield must be a valid selector within options.template";o=o[0]}else o=t}else t=document.createElement("DIV"),s.addClassName(t,"ink-tooltip"),s.addClassName(t,this._getOpt("color")),o=document.createElement("DIV"),s.addClassName(o,"content"),t.appendChild(o);return this._getOpt("html")?o.innerHTML=this._getOpt("html"):n.setTextContent(o,this._getOpt("text")),t.style.display="block",t.style.position="absolute",t.style.zIndex=this._getIntOpt("zIndex"),t},_fadeInTooltipElement:function(e){var t=this._getFloatOpt("fade");l&&t&&(e.style.opacity="0",e.style[l]=t+"s",e.style[h]="opacity",e.style[d]="ease-in-out",setTimeout(function(){e.style.opacity="1"},0))},_placeTooltipElement:function(e,t){var i=this._getOpt("where");if("mousemove"===i||"mousefix"===i){var o=t;this._setPos(o[0],o[1]),u.appendChild(e)}else if(i.match(/(up|down|left|right)/)){u.appendChild(e);var r=n.offset(this.element),a=r[0],l=r[1];a instanceof Array&&(l=a[1],a=a[0]);var h=n.elementWidth(this.element)/2-n.elementWidth(e)/2,d=n.elementHeight(this.element)/2-n.elementHeight(e)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(e),m=n.elementDimensions(this.element),f=n.scrollWidth()+n.viewportWidth(),_=n.scrollHeight()+n.viewportHeight();"left"===i&&a-p[0]<0?i="right":"right"===i&&a+p[0]>f?i="left":"up"===i&&l-p[1]<0?i="down":"down"===i&&l+p[1]>_&&(i="up"),"up"===i?(l-=p[1],l-=c,a+=h):"down"===i?(l+=m[1],l+=c,a+=h):"left"===i?(a-=p[0],a-=c,l+=d):"right"===i&&(a+=m[0],a+=c,l+=d);var g=null;i.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),s.addClassName(g,"arrow"),s.addClassName(g,this._oppositeDirections[i]),e.appendChild(g));var v=this._getLocalScroll(),y=a-v[0],b=l-v[1],k=b+p[1]-_,w=y+p[0]-f,C=0-y,I=0-b;k>0?(g&&(g.style.top=p[1]/2+k+"px"),b-=k):I>0?(g&&(g.style.top=p[1]/2-I+"px"),b+=I):w>0?(g&&(g.style.left=p[0]/2+w+"px"),y-=w):C>0&&(g&&(g.style.left=p[0]/2-C+"px"),y+=C),e.style.left=y+"px",e.style.top=b+"px"}},_removeTooltip:function(){var e=this.tooltip;if(e){var t=Ink.bind(n.remove,{},e);"mousemove"!==this._getOpt("where")&&l?(e.style.opacity=0,setTimeout(t,1e3*this._getFloatOpt("fade"))):t(),this.tooltip=null}},_getOpt:function(e){var t=n.data(this.element)[n._camelCase("tip-"+e)];if(t)return t;var i=this.root.options[e];return"undefined"!=typeof i?i:void 0},_getIntOpt:function(e){return parseInt(this._getOpt(e),10)},_getFloatOpt:function(e){return parseFloat(this._getOpt(e),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(e){var t=this._getMousePosition(e),n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(t),this._delayTimeout=null},this),1e3*n):this._makeTooltip(t)},_onMouseMove:function(e){if("mousemove"===this._getOpt("where")&&this.tooltip){var t=this._getMousePosition(e);this._setPos(t[0],t[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(e,t){e+=this._getIntOpt("left"),t+=this._getIntOpt("top");var i=this._getPageXY();if(this.tooltip){var o=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],s=this._getScroll();o[0]+e-s[0]>=i[0]-20&&(e=e-o[0]-this._getIntOpt("left")-10),o[1]+t-s[1]>=i[1]-20&&(t=t-o[1]-this._getIntOpt("top")-10),this.tooltip.style.left=e+"px",this.tooltip.style.top=t+"px"}},_getPageXY:function(){var e=0,t=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),[parseInt(e,10),parseInt(t,10)]},_getScroll:function(){var e=document.documentElement,t=document.body;return e&&(e.scrollLeft||e.scrollTop)?[e.scrollLeft,e.scrollTop]:t?[t.scrollLeft,t.scrollTop]:[0,0]},_getLocalScroll:function(){for(var e,t,n=[0,0],i=this.element.parentNode;i&&i!==document.documentElement&&i!==document.body;)e=i.scrollLeft,t=i.scrollTop,e&&(n[0]+=e),t&&(n[1]+=t),i=i.parentNode;return n},_getMousePosition:function(e){return[parseInt(t.pointerX(e),10),parseInt(t.pointerY(e),10)]}},r});
Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(e,t,n,i,o,s){"use strict";var r=function(n,s){this._handlers={paginationChange:Ink.bind(this._onPaginationChange,this),windowResize:Ink.bind(this.refit,this)},t.observe(window,"resize",this._handlers.windowResize),this._element=e.elOrSelector(n,"1st argument"),this._options=Ink.extendObj({axis:"x",hideLast:!1,center:!1,keyboardSupport:!1,pagination:null,onChange:null},s||{},i.data(this._element)),this._isY="y"===this._options.axis;var r=this._element,a=Ink.s("ul.stage",r);if(this._ulEl=a,i.removeTextNodeChildren(a),this._options.hideLast){var l=document.createElement("div");l.className="hider",this._element.appendChild(l),l.style.position="absolute",l.style[this._isY?"left":"top"]="0",l.style[this._isY?"right":"bottom"]="0",l.style[this._isY?"bottom":"right"]="0",this._hiderEl=l}this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.pagination&&(e.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new o(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination._options.onChange=this._handlers.paginationChange,this._pagination.setSize(this._numPages),this._pagination.setCurrent(0)))};return r.prototype={refit:function(){this._liEls=Ink.ss("li.slide",this._ulEl);var e=this._liEls.length;this._ctnLength=this._size(this._element),this._elLength=this._size(this._liEls[0]),this._itemsPerPage=Math.floor(this._ctnLength/this._elLength),this._numPages=Math.ceil(e/this._itemsPerPage),this._deltaLength=this._itemsPerPage*this._elLength,this._isY?(this._element.style.width=this._liEls[0].offsetWidth+"px",this._ulEl.style.width=this._liEls[0].offsetWidth+"px"):this._ulEl.style.height=this._liEls[0].offsetHeight+"px",this._center(),this._updateHider(),this._IE7(),this._pagination&&(this._pagination.setSize(this._numPages),this._pagination.setCurrent(0))},_size:function(e){var t=i.outerDimensions(e);return this._isY?t[1]:t[0]},_center:function(){if(this._options.center){var e,t=Math.floor((this._ctnLength-this._elLength*this._itemsPerPage)/2);e=this._isY?[t,"px 0"]:["0 ",t,"px"],this._ulEl.style.padding=e.join("")}},_updateHider:function(){if(this._hiderEl){var e=Math.floor(this._ctnLength-this._elLength*this._itemsPerPage);this._options.center&&(e/=2),this._hiderEl.style[this._isY?"height":"width"]=e+"px"}},_IE7:function(){if(s.IE&&"7"==""+s.version.split(".")[0]){this._numPages;for(var e=Ink.ss("li.slide",this._ulEl),t=function(t,i){e[n].style[t]=i},n=0,i=e.length;i>n;n++)t("position","absolute"),t(this._isY?"top":"left",n*this._elLength+"px")}},_onPaginationChange:function(e){var t=e.getCurrent();this._ulEl.style["y"===this._options.axis?"top":"left"]=["-",t*this._deltaLength,"px"].join(""),this._options.onChange&&this._options.onChange.call(this,t)}},r});